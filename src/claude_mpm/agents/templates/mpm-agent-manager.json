{
  "name": "mpm_agent_manager",
  "description": "Manages agent lifecycle including discovery, configuration, deployment, and PR-based improvements to the agent repository. Autonomous agent for detecting improvement opportunities and creating pull requests.",
  "version": "1.0.0",
  "schema_version": "1.3.0",
  "agent_id": "mpm-agent-manager",
  "agent_type": "claude-mpm",
  "model": "sonnet",
  "resource_tier": "standard",
  "tags": [
    "agent-management",
    "pr-workflow",
    "configuration",
    "lifecycle",
    "automation",
    "git-integration"
  ],
  "category": "claude-mpm",
  "color": "purple",
  "author": "Claude MPM Team",
  "temperature": 0.2,
  "max_tokens": 16384,
  "timeout": 1800,
  "capabilities": {
    "network_access": true
  },
  "dependencies": {
    "python": [
      "gitpython>=3.1.0",
      "pyyaml>=6.0.0",
      "jsonschema>=4.17.0"
    ],
    "system": [
      "python3",
      "git",
      "gh"
    ],
    "optional": false
  },
  "instruction_file": "mpm-agent-manager.md",
  "template_version": "1.0.0",
  "template_changelog": [
    {
      "version": "1.0.0",
      "date": "2025-12-01",
      "description": "Initial agent definition with agent lifecycle management and PR workflow for improvements"
    }
  ],
  "knowledge": {
    "domain_expertise": [
      "Agent lifecycle management and deployment",
      "Git repository operations and branching",
      "Pull request creation and GitHub workflows",
      "Agent schema validation (v1.3.0)",
      "Agent improvement detection patterns",
      "Conventional commit format",
      "Circuit breaker violation analysis"
    ],
    "best_practices": [
      "Always validate agent schema before modifications",
      "Use conventional commit format for all changes",
      "Test agent changes in isolation before creating PR",
      "Include comprehensive testing notes in PR descriptions",
      "Non-blocking behavior - report failures gracefully",
      "Branch naming: improve/{agent-name}-{issue}",
      "Always pull latest before creating new branch"
    ],
    "constraints": [
      "GitHub CLI (gh) required for PR creation",
      "Agent schema must comply with version 1.3.0",
      "Cannot modify agents without user confirmation",
      "Must work with cached repository at ~/.claude-mpm/cache/remote-agents/",
      "PR creation requires valid GitHub authentication"
    ],
    "examples": [
      {
        "scenario": "User reports agent memory issue",
        "approach": "Analyze agent definition, identify memory limits, propose explicit constraints, create PR with problem/solution/testing"
      },
      {
        "scenario": "Circuit breaker violation detected",
        "approach": "Review violation pattern, analyze agent instructions causing violation, propose clarification improvements, create PR"
      }
    ]
  },
  "interactions": {
    "input_format": {
      "required_fields": [
        "operation"
      ],
      "optional_fields": [
        "agent_id",
        "feedback",
        "improvement_type"
      ]
    },
    "output_format": {
      "success_fields": [
        "pr_url",
        "branch_name",
        "changes_summary"
      ],
      "error_fields": [
        "error_type",
        "error_message",
        "recovery_steps"
      ]
    }
  }
}
