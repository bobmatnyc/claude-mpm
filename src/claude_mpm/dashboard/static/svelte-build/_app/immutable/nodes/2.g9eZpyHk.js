var Mt=Object.defineProperty;var rt=e=>{throw TypeError(e)};var Ct=(e,t,s)=>t in e?Mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Pe=(e,t,s)=>Ct(e,typeof t!="symbol"?t+"":t,s),$t=(e,t,s)=>t.has(e)||rt("Cannot "+s);var Ue=(e,t,s)=>($t(e,t,"read from private field"),s?s.call(e):t.get(e)),at=(e,t,s)=>t.has(e)?rt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s);import{f as L,a as N,c as _e,d as pt}from"../chunks/UyNCZuxq.js";import{o as Q,q as Nt,L as mt,g as a,a4 as Dt,N as Ot,O as Lt,P as st,C as Ie,Q as Me,z as Ee,ag as gt,aD as Pt,an as ot,D as Re,I as Ye,K as Ht,aB as Ze,aJ as _t,ae as nt,X as Rt,aK as Ft,aL as jt,aM as zt,v as xt,A as Fe,aN as ie,aO as bt,F as ht,H as kt,aP as Xe,U as qt,ax as Je,aQ as Bt,aA as Vt,G as Wt,aR as Ut,aS as Xt,R as yt,_ as Gt,aT as Kt,aU as Yt,aV as Jt,aW as Qt,aX as Zt,aY as er,aZ as tr,aG as Z,a0 as U,p as Ne,a_ as wt,t as Y,s as $,k as De,m as v,a$ as rr,n as c,j as ne,a5 as et,u as ve,aI as te,W as Ge,b0 as He,b1 as ar,b2 as it}from"../chunks/BVfdGV4c.js";import{d as Oe,s as B,e as lt}from"../chunks/DwdoP665.js";import{i as J,s as Se,a as Tt,c as sr,p as je,b as Et}from"../chunks/_AL21imO.js";import{i as or}from"../chunks/8D6js3zj.js";import{s as ze}from"../chunks/CL6afrgo.js";function xe(e,t){return t}function nr(e,t,s){for(var i=[],o=t.length,r,l=t.length,f=0;f<o;f++){let D=t[f];kt(D,()=>{if(r){if(r.pending.delete(D),r.done.add(D),r.pending.size===0){var h=e.outrogroups;Qe(Ze(r.done)),h.delete(r),h.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var _=i.length===0&&s!==null;if(_){var b=s,E=b.parentNode;Vt(E),E.append(b),e.items.clear()}Qe(t,!_)}else r={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(r)}function Qe(e,t=!0){for(var s=0;s<e.length;s++)Wt(e[s],t)}var dt;function ce(e,t,s,i,o,r=null){var l=e,f=new Map,_=(t&bt)!==0;if(_){var b=e;l=Q?Ie(xt(b)):b.appendChild(Fe())}Q&&Nt();var E=null,D=Dt(()=>{var d=s();return _t(d)?d:d==null?[]:Ze(d)}),h,A=!0;function z(){u.fallback=E,ir(u,h,l,t,i),E!==null&&(h.length===0?(E.f&ie)===0?ht(E):(E.f^=ie,Ae(E,null,l)):kt(E,()=>{E=null}))}var H=mt(()=>{h=a(D);var d=h.length;let S=!1;if(Q){var V=Ot(l)===Lt;V!==(d===0)&&(l=st(),Ie(l),Me(!1),S=!0)}for(var R=new Set,g=Re,w=Ht(),k=0;k<d;k+=1){Q&&Ee.nodeType===gt&&Ee.data===Pt&&(l=Ee,S=!0,Me(!1));var O=h[k],I=i(O,k),M=A?null:f.get(I);M?(M.v&&ot(M.v,O),M.i&&ot(M.i,k),w&&g.skipped_effects.delete(M.e)):(M=lr(f,A?l:dt??(dt=Fe()),O,I,k,o,t,s),A||(M.e.f|=ie),f.set(I,M)),R.add(I)}if(d===0&&r&&!E&&(A?E=Ye(()=>r(l)):(E=Ye(()=>r(dt??(dt=Fe()))),E.f|=ie)),Q&&d>0&&Ie(st()),!A)if(w){for(const[P,W]of f)R.has(P)||g.skipped_effects.add(W.e);g.oncommit(z),g.ondiscard(()=>{})}else z();S&&Me(!0),a(D)}),u={effect:H,items:f,outrogroups:null,fallback:E};A=!1,Q&&(l=Ee)}function ir(e,t,s,i,o){var M,P,W,X,q,j,G,m,y;var r=(i&Bt)!==0,l=t.length,f=e.items,_=e.effect.first,b,E=null,D,h=[],A=[],z,H,u,d;if(r)for(d=0;d<l;d+=1)z=t[d],H=o(z,d),u=f.get(H).e,(u.f&ie)===0&&((P=(M=u.nodes)==null?void 0:M.a)==null||P.measure(),(D??(D=new Set)).add(u));for(d=0;d<l;d+=1){if(z=t[d],H=o(z,d),u=f.get(H).e,e.outrogroups!==null)for(const x of e.outrogroups)x.pending.delete(u),x.done.delete(u);if((u.f&ie)!==0)if(u.f^=ie,u===_)Ae(u,null,s);else{var S=E?E.next:_;u===e.effect.last&&(e.effect.last=u.prev),u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),de(e,E,u),de(e,u,S),Ae(u,S,s),E=u,h=[],A=[],_=E.next;continue}if((u.f&Xe)!==0&&(ht(u),r&&((X=(W=u.nodes)==null?void 0:W.a)==null||X.unfix(),(D??(D=new Set)).delete(u))),u!==_){if(b!==void 0&&b.has(u)){if(h.length<A.length){var V=A[0],R;E=V.prev;var g=h[0],w=h[h.length-1];for(R=0;R<h.length;R+=1)Ae(h[R],V,s);for(R=0;R<A.length;R+=1)b.delete(A[R]);de(e,g.prev,w.next),de(e,E,g),de(e,w,V),_=V,E=w,d-=1,h=[],A=[]}else b.delete(u),Ae(u,_,s),de(e,u.prev,u.next),de(e,u,E===null?e.effect.first:E.next),de(e,E,u),E=u;continue}for(h=[],A=[];_!==null&&_!==u;)(b??(b=new Set)).add(_),A.push(_),_=_.next;if(_===null)continue}(u.f&ie)===0&&h.push(u),E=u,_=u.next}if(e.outrogroups!==null){for(const x of e.outrogroups)x.pending.size===0&&(Qe(Ze(x.done)),(q=e.outrogroups)==null||q.delete(x));e.outrogroups.size===0&&(e.outrogroups=null)}if(_!==null||b!==void 0){var k=[];if(b!==void 0)for(u of b)(u.f&Xe)===0&&k.push(u);for(;_!==null;)(_.f&Xe)===0&&_!==e.fallback&&k.push(_),_=_.next;var O=k.length;if(O>0){var I=(i&bt)!==0&&l===0?s:null;if(r){for(d=0;d<O;d+=1)(G=(j=k[d].nodes)==null?void 0:j.a)==null||G.measure();for(d=0;d<O;d+=1)(y=(m=k[d].nodes)==null?void 0:m.a)==null||y.fix()}nr(e,k,I)}}r&&qt(()=>{var x,n;if(D!==void 0)for(u of D)(n=(x=u.nodes)==null?void 0:x.a)==null||n.apply()})}function lr(e,t,s,i,o,r,l,f){var _=(l&jt)!==0?(l&zt)===0?Rt(s,!1,!1):nt(s):null,b=(l&Ft)!==0?nt(o):null;return{v:_,i:b,e:Ye(()=>(r(t,_??s,b??o,f),()=>{e.delete(i)}))}}function Ae(e,t,s){if(e.nodes)for(var i=e.nodes.start,o=e.nodes.end,r=t&&(t.f&ie)===0?t.nodes.start:s;i!==null;){var l=Je(i);if(r.before(i),i===o)return;i=l}}function de(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function dr(e,t){let s=null,i=Q;var o;if(Q){s=Ee;for(var r=xt(document.head);r!==null&&(r.nodeType!==gt||r.data!==e);)r=Je(r);if(r===null)Me(!1);else{var l=Je(r);r.remove(),Ie(l)}}Q||(o=document.head.appendChild(Fe()));try{mt(()=>t(o),Ut)}finally{i&&(Me(!0),Ie(s))}}const ct=[...` 	
\r\f \v\uFEFF`];function cr(e,t,s){var i=e==null?"":""+e;if(t&&(i=i?i+" "+t:t),s){for(var o in s)if(s[o])i=i?i+" "+o:o;else if(i.length)for(var r=o.length,l=0;(l=i.indexOf(o,l))>=0;){var f=l+r;(l===0||ct.includes(i[l-1]))&&(f===i.length||ct.includes(i[f]))?i=(l===0?"":i.substring(0,l))+i.substring(f+1):l=f}}return i===""?null:i}function vr(e,t){return e==null?null:String(e)}function se(e,t,s,i,o,r){var l=e.__className;if(Q||l!==s||l===void 0){var f=cr(s,i,r);(!Q||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):t?e.className=f:e.setAttribute("class",f)),e.__className=s}else if(r&&o!==r)for(var _ in r){var b=!!r[_];(o==null||b!==!!o[_])&&e.classList.toggle(_,b)}return r}function vt(e,t,s,i){var o=e.__style;if(Q||o!==t){var r=vr(t);(!Q||r!==e.getAttribute("style"))&&(r==null?e.removeAttribute("style"):e.style.cssText=r),e.__style=t}return i}function St(e,t,s=!1){if(e.multiple){if(t==null)return;if(!_t(t))return Kt();for(var i of e.options)i.selected=t.includes(Ce(i));return}for(i of e.options){var o=Ce(i);if(Yt(o,t)){i.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function ur(e){var t=new MutationObserver(()=>{St(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Gt(()=>{t.disconnect()})}function At(e,t,s=t){var i=new WeakSet,o=!0;Xt(e,"change",r=>{var l=r?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(l),Ce);else{var _=e.querySelector(l)??e.querySelector("option:not([disabled])");f=_&&Ce(_)}s(f),Re!==null&&i.add(Re)}),yt(()=>{var r=t();if(e===document.activeElement){var l=Jt??Re;if(i.has(l))return}if(St(e,r,o),o&&r===void 0){var f=e.querySelector(":checked");f!==null&&(r=Ce(f),s(r))}e.__value=r,o=!1}),ur(e)}function Ce(e){return"__value"in e?e.__value:e.value}const fr=Symbol("is custom element"),pr=Symbol("is html");function be(e,t,s,i){var o=mr(e);Q&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=s)&&(t==="loading"&&(e[tr]=s),s==null?e.removeAttribute(t):typeof s!="string"&&gr(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function mr(e){return e.__attributes??(e.__attributes={[fr]:e.nodeName.includes("-"),[pr]:e.namespaceURI===Qt})}var ut=new Map;function gr(e){var t=e.getAttribute("is")||e.nodeName,s=ut.get(t);if(s)return s;ut.set(t,s=[]);for(var i,o=e,r=Element.prototype;r!==o;){i=er(o);for(var l in i)i[l].set&&s.push(l);o=Zt(o)}return s}var $e;class _r{constructor(){at(this,$e,Z("dark"));Pe(this,"initialized",!1);Pe(this,"toggle",()=>{this.current=this.current==="dark"?"light":"dark",typeof window<"u"&&(localStorage.setItem("theme",this.current),this.applyTheme(this.current))});Pe(this,"set",t=>{this.current=t,typeof window<"u"&&(localStorage.setItem("theme",this.current),this.applyTheme(t))});if(typeof window<"u"&&!this.initialized){const t=localStorage.getItem("theme");t&&(this.current=t),this.applyTheme(this.current),this.initialized=!0}}get current(){return a(Ue(this,$e))}set current(t){U(Ue(this,$e),t,!0)}applyTheme(t){typeof document<"u"&&(t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))}}$e=new WeakMap;const Ke=new _r;var xr=L("<option disabled>Waiting for streams...</option>"),br=L("<option> </option>"),hr=pt('<svg class="w-5 h-5 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),kr=pt('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),yr=L('<div class="text-xs text-red-600 dark:text-red-400 max-w-xs truncate"> </div>'),wr=L('<header class="bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 transition-colors"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-slate-900 dark:text-white">Claude MPM Monitor</h1> <p class="text-sm text-slate-600 dark:text-slate-400 mt-1">Real-time multi-agent orchestration dashboard</p></div> <div class="flex items-center gap-3"><div class="flex items-center gap-2"><label for="stream-filter" class="text-sm text-slate-600 dark:text-slate-400">Stream:</label> <select id="stream-filter" class="px-3 py-1.5 text-sm text-slate-900 dark:text-slate-100 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded hover:bg-slate-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-colors"><!></select></div> <button class="p-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500"><!></button> <div class="flex items-center gap-2"><div></div> <span class="text-sm font-medium text-slate-900 dark:text-slate-100"> </span></div> <!></div></div></header>');function Tr(e,t){Ne(t,!1);const s=()=>Se(h,"$selectedStream",l),i=()=>Se(A,"$streamOptions",l),o=()=>Se(_,"$isConnected",l),r=()=>Se(b,"$error",l),[l,f]=Tt(),{isConnected:_,error:b,streams:E,streamMetadata:D,selectedStream:h}=ze,A=wt([E,D],([m,y])=>Array.from(m).map(x=>{const n=y.get(x);return{id:x,displayName:(n==null?void 0:n.projectName)||x,projectPath:(n==null?void 0:n.projectPath)||null}}));or();var z=wr(),H=v(z),u=$(v(H),2),d=v(u),S=$(v(d),2);Y(()=>{s(),rr(()=>{i()})});var V=v(S);{var R=m=>{var y=xr();y.value=y.__value="",N(m,y)},g=m=>{var y=_e(),x=ne(y);ce(x,1,i,xe,(n,p)=>{var T=br(),F=v(T,!0);c(T);var C={};Y(()=>{be(T,"title",a(p).projectPath||a(p).id),B(F,a(p).displayName),C!==(C=a(p).id)&&(T.value=(T.__value=a(p).id)??"")}),N(n,T)}),N(m,y)};J(V,m=>{i().length===0?m(R):m(g,!1)})}c(S),c(d);var w=$(d,2);w.__click=()=>Ke.toggle();var k=v(w);{var O=m=>{var y=hr();N(m,y)},I=m=>{var y=kr();N(m,y)};J(k,m=>{Ke.current==="dark"?m(O):m(I,!1)})}c(w);var M=$(w,2),P=v(M);let W;var X=$(P,2),q=v(X,!0);c(X),c(M);var j=$(M,2);{var G=m=>{var y=yr(),x=v(y);c(y),Y(()=>{be(y,"title",r()),B(x,`Error: ${r()??""}`)}),N(m,y)};J(j,m=>{r()&&m(G)})}c(u),c(H),c(z),Y(m=>{be(S,"title",m),S.disabled=i().length===0,be(w,"title",Ke.current==="dark"?"Switch to light mode":"Switch to dark mode"),W=se(P,1,"w-3 h-3 rounded-full transition-colors",null,W,{"bg-green-500":o(),"bg-red-500":!o()}),B(q,o()?"Connected":"Disconnected")},[()=>{var m;return((m=i().find(y=>y.id===s()))==null?void 0:m.projectPath)||""}]),At(S,s,m=>sr(h,m)),N(e,z),De(),f()}Oe(["click"]);var Er=L("<option> </option>"),Sr=L('<div class="text-center py-12 text-slate-400 dark:text-slate-500"><svg class="w-16 h-16 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <p class="text-lg mb-2">No events yet</p> <p class="text-sm">Waiting for Claude activity...</p></div>'),Ar=L('<span class="inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-semibold bg-green-500/20 text-green-600 dark:text-green-400 border border-green-500/30"> </span>'),Ir=L('<button><div><span> </span></div> <div class="text-slate-700 dark:text-slate-300 truncate font-mono text-[11px]"> </div> <div class="text-slate-700 dark:text-slate-300 truncate flex items-center gap-2"><span> </span> <!></div> <div class="text-slate-700 dark:text-slate-300 truncate"> </div> <div class="text-slate-500 dark:text-slate-400 font-mono text-[11px] text-right"> </div></button>'),Mr=L('<div class="grid grid-cols-[110px_120px_160px_120px_100px] gap-3 px-4 py-2 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 text-xs font-semibold text-slate-600 dark:text-slate-400 sticky top-0 transition-colors"><div>Event</div> <div>Source</div> <div>Activity</div> <div>Agent</div> <div class="text-right">Timestamp</div></div> <div tabindex="0" role="list" aria-label="Event list - use arrow keys to navigate" class="focus:outline-none overflow-y-auto max-h-[calc(100vh-280px)]"></div>',1),Cr=L('<div class="flex flex-col h-full bg-white dark:bg-slate-900"><div class="flex items-center justify-between px-6 py-3 bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 transition-colors"><div class="flex items-center gap-3"><select class="px-3 py-1 text-xs font-medium bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 rounded transition-colors border border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-200"><option>All Activities</option><!></select></div> <div class="flex items-center gap-3"><span class="text-sm text-slate-600 dark:text-slate-400"> </span> <button class="px-3 py-1 text-xs font-medium bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 rounded transition-colors border border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-200">Clear</button></div></div> <div class="flex-1 overflow-y-auto"><!></div></div>');function $r(e,t){Ne(t,!0);let s=je(t,"selectedEvent",15,null),i=je(t,"selectedStream",3,"all");const{events:o}=ze;let r=Z(et([]));ve(()=>o.subscribe(p=>{U(r,p,!0)}));let l=Z(null),f=Z(!0);function _(n,p=100){const{scrollTop:T,scrollHeight:F,clientHeight:C}=n;return F-T-C<p}ve(()=>{a(D).length>0&&a(l)&&(a(f)||_(a(l)))&&setTimeout(()=>{a(l)&&(a(l).scrollTop=a(l).scrollHeight,U(f,!1))},0)}),ve(()=>{i(),U(f,!0)});let b=Z(""),E=te(()=>i()===""||i()==="all"?a(r):a(r).filter(n=>{const p=n.data,T=p&&typeof p=="object"&&!Array.isArray(p)?p.session_id||p.sessionId:null;return(n.session_id||n.sessionId||T||n.source)===i()})),D=te(()=>a(b)?a(E).filter(n=>n.subtype===a(b)):a(E)),h=te(()=>Array.from(new Set(a(E).map(n=>n.subtype).filter(Boolean))).sort());function A(n){return new Date(n).toLocaleTimeString()}function z(n){switch(n){case"tool_call":return"text-blue-400";case"tool_result":return"text-green-400";case"message":return"text-purple-400";case"error":return"text-red-400";default:return"text-slate-400"}}function H(){ze.clearEvents(),s(null)}function u(n){s(n)}function d(n){var F;if(a(D).length===0)return;const p=s()?a(D).findIndex(C=>{var K;return C.id===((K=s())==null?void 0:K.id)}):-1;let T=p;if(n.key==="ArrowDown")n.preventDefault(),T=p<a(D).length-1?p+1:p;else if(n.key==="ArrowUp")n.preventDefault(),T=p>0?p-1:0;else return;if(T!==p&&T>=0&&T<a(D).length){s(a(D)[T]);const C=(F=a(l))==null?void 0:F.querySelector(`[data-event-id="${s().id}"]`);C&&C.scrollIntoView({block:"nearest",behavior:"smooth"})}}function S(n){return n.source||n.sessionId||n.session_id||"-"}function V(n){return n.subtype||"-"}function R(n){var p;if(n.subtype==="user_prompt"||n.subtype==="UserPromptSubmit"||(p=n.subtype)!=null&&p.toLowerCase().includes("user"))return"user";if(typeof n.data=="object"&&n.data!==null){const T=n.data;return T.tool_name||T.agent_type||"-"}return"-"}function g(n){if(n.subtype!=="post_tool"||!n.correlation_id)return null;const p=a(r).find(K=>K.correlation_id===n.correlation_id&&K.subtype==="pre_tool");if(!p)return null;const T=typeof n.timestamp=="string"?new Date(n.timestamp).getTime():n.timestamp,F=typeof p.timestamp=="string"?new Date(p.timestamp).getTime():p.timestamp,C=T-F;if(C<1e3)return`${C}ms`;if(C<6e4)return`${(C/1e3).toFixed(2)}s`;{const K=Math.floor(C/6e4),ae=(C%6e4/1e3).toFixed(0);return`${K}m ${ae}s`}}var w=Cr(),k=v(w),O=v(k),I=v(O),M=v(I);M.value=M.__value="";var P=$(M);ce(P,17,()=>a(h),xe,(n,p)=>{var T=Er(),F=v(T,!0);c(T);var C={};Y(()=>{B(F,a(p)),C!==(C=a(p))&&(T.value=(T.__value=a(p))??"")}),N(n,T)}),c(I),c(O);var W=$(O,2),X=v(W),q=v(X);c(X);var j=$(X,2);j.__click=H,c(W),c(k);var G=$(k,2),m=v(G);{var y=n=>{var p=Sr();N(n,p)},x=n=>{var p=Mr(),T=$(ne(p),2);T.__keydown=d,ce(T,23,()=>a(D),F=>F.id,(F,C,K)=>{var ae=Ir();ae.__click=()=>u(a(C));var fe=v(ae),pe=v(fe),Le=v(pe,!0);c(pe),c(fe);var he=$(fe,2),qe=v(he,!0);c(he);var ke=$(he,2),ee=v(ke),re=v(ee,!0);c(ee);var le=$(ee,2);{var me=ue=>{var Te=Ar(),Ve=v(Te);c(Te),Y(We=>B(Ve,`→ ${We??""}`),[()=>g(a(C))]),N(ue,Te)};J(le,ue=>{g(a(C))&&ue(me)})}c(ke);var ye=$(ke,2),we=v(ye,!0);c(ye);var ge=$(ye,2),Be=v(ge,!0);c(ge),c(ae),Y((ue,Te,Ve,We,It)=>{var tt;be(ae,"data-event-id",a(C).id),se(ae,1,`w-full text-left px-4 py-2.5 transition-colors border-l-4 grid grid-cols-[110px_120px_160px_120px_100px] gap-3 items-center text-xs
							${((tt=s())==null?void 0:tt.id)===a(C).id?"bg-cyan-50 dark:bg-cyan-500/20 border-l-cyan-500 dark:border-l-cyan-400 ring-1 ring-cyan-300 dark:ring-cyan-500/30":`border-l-transparent ${a(K)%2===0?"bg-slate-50 dark:bg-slate-800/40":"bg-white dark:bg-slate-800/20"} hover:bg-slate-100 dark:hover:bg-slate-700/30`}`),se(pe,1,`font-mono px-2 py-0.5 rounded-md bg-slate-100 dark:bg-black/30 ${ue??""} font-medium text-[11px]`),B(Le,a(C).event||a(C).type),B(qe,Te),B(re,Ve),B(we,We),B(Be,It)},[()=>z(a(C).type),()=>S(a(C)),()=>V(a(C)),()=>R(a(C)),()=>A(a(C).timestamp)]),N(F,ae)}),c(T),Et(T,F=>U(l,F),()=>a(l)),N(n,p)};J(m,n=>{a(D).length===0?n(y):n(x,!1)})}c(G),c(w),Y(()=>B(q,`${a(D).length??""} events`)),At(I,()=>a(b),n=>U(b,n)),N(e,w),De()}Oe(["click","keydown"]);var Nr=L('<div class="text-center py-12 text-slate-400 dark:text-slate-500"><svg class="w-16 h-16 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-lg mb-2">No tool executions yet</p> <p class="text-sm">Waiting for Claude to use tools...</p></div>'),Dr=L('<button><div><span class="font-mono px-2 py-0.5 rounded-md bg-slate-100 dark:bg-black/30 text-blue-600 dark:text-blue-400 font-medium text-[11px]"> </span></div> <div class="text-slate-700 dark:text-slate-300 truncate"> </div> <div class="text-center"><span> </span></div> <div class="text-slate-600 dark:text-slate-400 font-mono text-[11px] text-right"> </div></button>'),Or=L('<div class="grid grid-cols-[140px_1fr_80px_100px] gap-3 px-4 py-2 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 text-xs font-semibold text-slate-600 dark:text-slate-400 sticky top-0 transition-colors"><div>Tool Name</div> <div>Operation</div> <div class="text-center">Status</div> <div class="text-right">Duration</div></div> <div tabindex="0" role="list" aria-label="Tool list - use arrow keys to navigate" class="focus:outline-none overflow-y-auto max-h-[calc(100vh-280px)]"></div>',1),Lr=L('<div class="flex flex-col h-full bg-white dark:bg-slate-900"><div class="flex items-center justify-between px-6 py-3 bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 transition-colors"><h2 class="text-lg font-semibold text-slate-900 dark:text-white">Tools</h2> <span class="text-sm text-slate-600 dark:text-slate-400"> </span></div> <div class="flex-1 overflow-y-auto"><!></div></div>');function Pr(e,t){Ne(t,!0);let s=je(t,"selectedTool",15,null),i=je(t,"selectedStream",3,"all"),o=te(()=>i()===""||i()==="all"?t.tools:t.tools.filter(g=>(g.preToolEvent.session_id||g.preToolEvent.sessionId||g.preToolEvent.source)===i())),r=Z(null),l=Z(!0);function f(g,w=100){const{scrollTop:k,scrollHeight:O,clientHeight:I}=g;return O-k-I<w}ve(()=>{a(o).length>0&&a(r)&&(a(l)||f(a(r)))&&setTimeout(()=>{a(r)&&(a(r).scrollTop=a(r).scrollHeight,U(l,!1))},0)}),ve(()=>{i(),U(l,!0)});function _(g){s(g)}function b(g){if(g===null)return"—";if(g<1e3)return`${g}ms`;if(g<6e4)return`${(g/1e3).toFixed(2)}s`;{const w=Math.floor(g/6e4),k=(g%6e4/1e3).toFixed(0);return`${w}m ${k}s`}}function E(g){switch(g){case"pending":return"⏳";case"success":return"✅";case"error":return"❌";default:return"❓"}}function D(g){switch(g){case"pending":return"text-yellow-600 dark:text-yellow-400";case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}}function h(g){var O;if(a(o).length===0)return;const w=s()?a(o).findIndex(I=>{var M;return I.id===((M=s())==null?void 0:M.id)}):-1;let k=w;if(g.key==="ArrowDown")g.preventDefault(),k=w<a(o).length-1?w+1:w;else if(g.key==="ArrowUp")g.preventDefault(),k=w>0?w-1:0;else return;if(k!==w&&k>=0&&k<a(o).length){s(a(o)[k]);const I=(O=a(r))==null?void 0:O.querySelector(`[data-tool-id="${s().id}"]`);I&&I.scrollIntoView({block:"nearest",behavior:"smooth"})}}var A=Lr(),z=v(A),H=$(v(z),2),u=v(H);c(H),c(z);var d=$(z,2),S=v(d);{var V=g=>{var w=Nr();N(g,w)},R=g=>{var w=Or(),k=$(ne(w),2);k.__keydown=h,ce(k,23,()=>a(o),O=>O.id,(O,I,M)=>{var P=Dr();P.__click=()=>_(a(I));var W=v(P),X=v(W),q=v(X,!0);c(X),c(W);var j=$(W,2),G=v(j,!0);c(j);var m=$(j,2),y=v(m),x=v(y,!0);c(y),c(m);var n=$(m,2),p=v(n,!0);c(n),c(P),Y((T,F,C)=>{var K;be(P,"data-tool-id",a(I).id),se(P,1,`w-full text-left px-4 py-2.5 transition-colors border-l-4 grid grid-cols-[140px_1fr_80px_100px] gap-3 items-center text-xs
							${((K=s())==null?void 0:K.id)===a(I).id?"bg-cyan-50 dark:bg-cyan-500/20 border-l-cyan-500 dark:border-l-cyan-400 ring-1 ring-cyan-300 dark:ring-cyan-500/30":`border-l-transparent ${a(M)%2===0?"bg-slate-50 dark:bg-slate-800/40":"bg-white dark:bg-slate-800/20"} hover:bg-slate-100 dark:hover:bg-slate-700/30`}`),B(q,a(I).toolName),B(G,a(I).operation),se(y,1,`${T??""} text-base`),B(x,F),B(p,C)},[()=>D(a(I).status),()=>E(a(I).status),()=>b(a(I).duration)]),N(O,P)}),c(k),Et(k,O=>U(r,O),()=>a(r)),N(g,w)};J(S,g=>{a(o).length===0?g(V):g(R,!1)})}c(d),c(A),Y(()=>B(u,`${a(o).length??""} tools`)),N(e,A),De()}Oe(["keydown","click"]);var Hr=L('<div class="text-yellow-600 dark:text-yellow-400 text-xs"><span></span></div>'),Rr=L('<div class="ml-4"><span class="text-cyan-600 dark:text-cyan-400"> </span> <!></div>'),Fr=L('<div class="ml-4 text-slate-400 dark:text-slate-500 text-xs"> </div>'),jr=L('<div class="ml-4 text-slate-400 dark:text-slate-500 text-xs"> </div>'),zr=L("<!> <!> <!>",1),qr=L('<div class="mb-1"><button class="inline-flex items-center hover:bg-slate-100 dark:hover:bg-slate-800 rounded px-1 -ml-1 transition-colors"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg> <span class="text-slate-400 dark:text-slate-500"> </span></button> <!></div>'),Br=L("<span> </span>"),Vr=L('<div class="text-center py-12 text-slate-400 dark:text-slate-500"><svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm">Select an event or tool to view details</p></div>'),Wr=L('<div class="mb-1"><span class="text-cyan-600 dark:text-cyan-400"> </span> <!></div>'),Ur=L('<div class="mb-1"><span class="text-cyan-600 dark:text-cyan-400"> </span> <!></div>'),Xr=L('<div class="text-slate-400 dark:text-slate-500 italic">Waiting for result...</div>'),Gr=L('<div class="font-mono text-xs space-y-6"><div><div class="text-sm font-bold text-slate-700 dark:text-slate-300 mb-3 pb-2 border-b border-slate-300 dark:border-slate-600">=== PRE-TOOL ===</div> <!></div> <div><div class="text-sm font-bold text-slate-700 dark:text-slate-300 mb-3 pb-2 border-b border-slate-300 dark:border-slate-600">=== POST-TOOL ===</div> <!></div></div>'),Kr=L('<div class="mb-1"><span class="text-cyan-600 dark:text-cyan-400"> </span> <!></div>'),Yr=L('<div class="font-mono text-xs"></div>'),Jr=L('<div class="flex flex-col h-full bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-700 transition-colors"><div class="px-4 py-3 bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 transition-colors"><h3 class="text-sm font-semibold text-slate-900 dark:text-white">JSON Data Explorer</h3></div> <div class="flex-1 overflow-y-auto p-4"><!></div></div>');function Qr(e,t){Ne(t,!0);const s=(d,S=Ge,V=Ge,R=Ge)=>{var g=_e(),w=ne(g);{var k=I=>{var M=Hr(),P=v(M);P.textContent="... (max depth 5 reached)",c(M),N(I,M)},O=I=>{const M=te(()=>f(S())),P=te(()=>E(S())),W=te(()=>a(r).has(V()));var X=_e(),q=ne(X);{var j=m=>{var y=qr(),x=v(y);x.__click=()=>l(V());var n=v(x),p=$(n,2),T=v(p,!0);c(p),c(x);var F=$(x,2);{var C=K=>{const ae=te(()=>b(S()));var fe=zr(),pe=ne(fe);ce(pe,17,()=>a(ae),xe,(ee,re)=>{var le=te(()=>He(a(re),2));let me=()=>a(le)[0],ye=()=>a(le)[1];var we=Rr(),ge=v(we),Be=v(ge);c(ge);var ue=$(ge,2);s(ue,ye,()=>`${V()}.${me()}`,()=>R()+1),c(we),Y(()=>B(Be,`${me()??""}:`)),N(ee,we)});var Le=$(pe,2);{var he=ee=>{var re=Fr(),le=v(re);c(re),Y(()=>B(le,`... and ${S().length-i} more items`)),N(ee,re)};J(Le,ee=>{Array.isArray(S())&&S().length>i&&ee(he)})}var qe=$(Le,2);{var ke=ee=>{var re=jr(),le=v(re);c(re),Y(me=>B(le,`... and ${me??""} more properties`),[()=>Object.keys(S()).length-i]),N(ee,re)};J(qe,ee=>{!Array.isArray(S())&&typeof S()=="object"&&S()!==null&&Object.keys(S()).length>i&&ee(ke)})}N(K,fe)};J(F,K=>{a(W)&&K(C)})}c(y),Y(()=>{se(n,0,`w-3 h-3 mr-1 transition-transform ${a(W)?"rotate-90":""} text-slate-600 dark:text-slate-400`),B(T,a(M)==="array"?"[...]":"{...}")}),N(m,y)},G=m=>{var y=Br(),x=v(y,!0);c(y),Y((n,p)=>{se(y,1,`${n??""} ml-1`),B(x,p)},[()=>D(a(M)),()=>_(S())]),N(m,y)};J(q,m=>{a(P)?m(j):m(G,!1)})}N(I,X)};J(w,I=>{R()>=o?I(k):I(O,!1)})}N(d,g)},i=50,o=5;let r=Z(et(new Set));ve(()=>{t.event||t.tool?U(r,new Set(["root","root.data","root.preToolEvent","root.postToolEvent"]),!0):U(r,new Set,!0)});function l(d){const S=new Set(a(r));S.has(d)?S.delete(d):S.add(d),U(r,S,!0)}function f(d){return d===null?"null":Array.isArray(d)?"array":typeof d}function _(d){return d===null?"null":d===void 0?"undefined":typeof d=="string"?d.length>80?`"${d.slice(0,80)}..."`:`"${d}"`:typeof d=="boolean"||typeof d=="number"?String(d):""}function b(d){return Array.isArray(d)?d.slice(0,i).map((S,V)=>[`[${V}]`,S]):typeof d=="object"&&d!==null?Object.entries(d).slice(0,i):[]}function E(d){return typeof d=="object"&&d!==null}function D(d){switch(d){case"string":return"text-green-600 dark:text-green-400";case"number":return"text-blue-600 dark:text-blue-400";case"boolean":return"text-purple-600 dark:text-purple-400";case"null":return"text-slate-400 dark:text-slate-500";default:return"text-slate-700 dark:text-slate-300"}}var h=Jr(),A=$(v(h),2),z=v(A);{var H=d=>{var S=Vr();N(d,S)},u=d=>{var S=_e(),V=ne(S);{var R=w=>{var k=Gr(),O=v(k),I=$(v(O),2);ce(I,17,()=>b(t.tool.preToolEvent),xe,(q,j)=>{var G=te(()=>He(a(j),2));let m=()=>a(G)[0],y=()=>a(G)[1];var x=Wr(),n=v(x),p=v(n);c(n);var T=$(n,2);s(T,y,()=>`root.${m()}`,()=>0),c(x),Y(()=>B(p,`${m()??""}:`)),N(q,x)}),c(O);var M=$(O,2),P=$(v(M),2);{var W=q=>{var j=_e(),G=ne(j);ce(G,17,()=>b(t.tool.postToolEvent),xe,(m,y)=>{var x=te(()=>He(a(y),2));let n=()=>a(x)[0],p=()=>a(x)[1];var T=Ur(),F=v(T),C=v(F);c(F);var K=$(F,2);s(K,p,()=>`root.${n()}`,()=>0),c(T),Y(()=>B(C,`${n()??""}:`)),N(m,T)}),N(q,j)},X=q=>{var j=Xr();N(q,j)};J(P,q=>{t.tool.postToolEvent?q(W):q(X,!1)})}c(M),c(k),N(w,k)},g=w=>{var k=_e(),O=ne(k);{var I=M=>{var P=Yr();ce(P,21,()=>b(t.event),xe,(W,X)=>{var q=te(()=>He(a(X),2));let j=()=>a(q)[0],G=()=>a(q)[1];var m=Kr(),y=v(m),x=v(y);c(y);var n=$(y,2);s(n,G,()=>`root.${j()}`,()=>0),c(m),Y(()=>B(x,`${j()??""}:`)),N(W,m)}),c(P),N(M,P)};J(O,M=>{t.event&&M(I)},!0)}N(w,k)};J(V,w=>{t.tool?w(R):w(g,!1)},!0)}N(d,S)};J(z,d=>{!t.event&&!t.tool?d(H):d(u,!1)})}c(A),c(h),N(e,h),De()}Oe(["click"]);function Zr(e){return wt(e,s=>{const i=new Map;return s.forEach(o=>{const r=o.data,l=o.subtype||(r==null?void 0:r.subtype);if(l!=="pre_tool"&&l!=="post_tool")return;const f=o.correlation_id||(r==null?void 0:r.correlation_id)||(r==null?void 0:r.tool_call_id),_=o.session_id||o.sessionId||(r==null?void 0:r.session_id)||"unknown",b=(r==null?void 0:r.tool_name)||"Unknown",E=typeof o.timestamp=="string"?o.timestamp:new Date(o.timestamp).toISOString(),D=f||`${_}_${b}_${E}`;if(console.log(`[Tools Store] Processing ${l} event:`,{correlationId:f,generatedId:D,toolName:b,sessionId:_,hasCorrelationId:!!f,eventData:r}),l==="pre_tool"){const h=i.get(D),A=ft(b,r);h?(h.preToolEvent=o,h.toolName=b,h.operation=A,h.timestamp=o.timestamp):i.set(D,{id:D,toolName:b,operation:A,status:"pending",duration:null,preToolEvent:o,postToolEvent:null,timestamp:o.timestamp})}else if(l==="post_tool"){let h=i.get(D);if(!f&&!h){const A=typeof o.timestamp=="string"?new Date(o.timestamp).getTime():o.timestamp;for(const[z,H]of i.entries())if(H.toolName===b&&!H.postToolEvent){const u=typeof H.timestamp=="string"?new Date(H.timestamp).getTime():H.timestamp;if(Math.abs(A-u)<3e4){h=H;break}}}if(h){h.postToolEvent=o;const A=o.data,z=(A==null?void 0:A.error)||(A==null?void 0:A.is_error);h.status=z?"error":"success";const H=typeof h.preToolEvent.timestamp=="string"?new Date(h.preToolEvent.timestamp).getTime():h.preToolEvent.timestamp,u=typeof o.timestamp=="string"?new Date(o.timestamp).getTime():o.timestamp;h.duration=u-H}else{const A=ft(b,r);i.set(D,{id:D,toolName:b,operation:A,status:r!=null&&r.error||r!=null&&r.is_error?"error":"success",duration:null,preToolEvent:o,postToolEvent:o,timestamp:o.timestamp})}}}),Array.from(i.values()).sort((o,r)=>{const l=typeof o.timestamp=="string"?new Date(o.timestamp).getTime():o.timestamp;return(typeof r.timestamp=="string"?new Date(r.timestamp).getTime():r.timestamp)-l})})}function ft(e,t){if(!t)return"No details";switch(e){case"Bash":const s=t.command;return s?oe(s,40):"No command";case"Read":const i=t.file_path;return i?`Read ${oe(i,35)}`:"Read file";case"Edit":const o=t.file_path;return o?`Edit ${oe(o,35)}`:"Edit file";case"Write":const r=t.file_path;return r?`Write ${oe(r,35)}`:"Write file";case"Grep":const l=t.pattern;return l?`Search: ${oe(l,30)}`:"Search";case"Glob":const f=t.pattern;return f?`Find: ${oe(f,30)}`:"Find files";default:return t.description?oe(t.description,40):t.action?oe(t.action,40):t.query?oe(t.query,40):"Tool execution"}}function oe(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}var ea=L('<div class="flex flex-col h-screen bg-slate-50 dark:bg-slate-900 transition-colors"><!> <div class="split-container flex flex-1 min-h-0"><div class="left-panel flex flex-col flex-shrink-0 min-w-0"><div class="bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 transition-colors"><div class="flex gap-0 px-2 pt-2"><button>Events</button> <button>Tools</button></div></div> <div class="flex-1 min-h-0"><!></div></div> <div role="separator" aria-label="Resize panels" tabindex="0"></div> <div class="right-panel flex-1 min-w-0"><!></div></div></div>');function la(e,t){Ne(t,!0);const s=()=>Se(E,"$selectedStream",i),[i,o]=Tt();let r=Z(null),l=Z(null),f=Z("events"),_=Z(40),b=Z(!1);const{selectedStream:E,events:D}=ze,h=Zr(D);let A=Z(et([]));ve(()=>h.subscribe(n=>{U(A,n,!0)})),ve(()=>{a(f)==="events"?U(l,null):U(r,null)});function z(x){U(b,!0),x.preventDefault()}function H(x){if(!a(b))return;const n=document.querySelector(".split-container");if(!n)return;const p=n.getBoundingClientRect(),T=(x.clientX-p.left)/p.width*100,F=300/p.width*100,K=100-200/p.width*100;U(_,Math.max(F,Math.min(K,T)),!0)}function u(){U(b,!1)}var d=ea();dr("1uha8ag",x=>{yt(()=>{ar.title="Claude MPM Monitor"})}),lt("mousemove",it,H),lt("mouseup",it,u);var S=v(d);Tr(S,{});var V=$(S,2),R=v(V),g=v(R),w=v(g),k=v(w);k.__click=()=>U(f,"events");let O;var I=$(k,2);I.__click=()=>U(f,"tools");let M;c(w),c(g);var P=$(g,2),W=v(P);{var X=x=>{$r(x,{get selectedStream(){return s()},get selectedEvent(){return a(r)},set selectedEvent(n){U(r,n,!0)}})},q=x=>{Pr(x,{get tools(){return a(A)},get selectedStream(){return s()},get selectedTool(){return a(l)},set selectedTool(n){U(l,n,!0)}})};J(W,x=>{a(f)==="events"?x(X):x(q,!1)})}c(P),c(R);var j=$(R,2);let G;j.__mousedown=z;var m=$(j,2),y=v(m);Qr(y,{get event(){return a(r)},get tool(){return a(l)}}),c(m),c(V),c(d),Y(()=>{vt(R,`width: ${a(_)??""}%;`),O=se(k,1,"tab svelte-1uha8ag",null,O,{active:a(f)==="events"}),M=se(I,1,"tab svelte-1uha8ag",null,M,{active:a(f)==="tools"}),G=se(j,1,"divider svelte-1uha8ag",null,G,{dragging:a(b)}),vt(m,`width: ${100-a(_)}%;`)}),N(e,d),De(),o()}Oe(["click","mousedown"]);export{la as component};
