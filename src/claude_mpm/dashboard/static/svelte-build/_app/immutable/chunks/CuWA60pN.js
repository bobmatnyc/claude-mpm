var H=Object.defineProperty;var B=t=>{throw TypeError(t)};var Z=(t,e,s)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var N=(t,e,s)=>Z(t,typeof e!="symbol"?e+"":e,s),k=(t,e,s)=>e.has(t)||B("Cannot "+s);var a=(t,e,s)=>(k(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Y=(t,e,s,r)=>(k(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{v as x,w as $,x as y,y as J,z as F,A as C,o as D,B as K,C as Q,D as V,E as W,q as X,F as j,G as ee,H as te,I as se,J as ae,K as U,L as re,M as ie,P as ne,g as O,h as fe,N as ce,O as de,Q as he,R as ue,S as _e,T as oe,U as le,b as ve,a as be,V as ge,W as Se,X as me,Y as Pe,Z as pe}from"./Buhf2o7k.js";var _,o,u,b,p,A,T;class Ae{constructor(e,s=!0){N(this,"anchor");v(this,_,new Map);v(this,o,new Map);v(this,u,new Map);v(this,b,new Set);v(this,p,!0);v(this,A,()=>{var e=x;if(a(this,_).has(e)){var s=a(this,_).get(e),r=a(this,o).get(s);if(r)$(r),a(this,b).delete(s);else{var c=a(this,u).get(s);c&&(a(this,o).set(s,c.effect),a(this,u).delete(s),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),r=c.effect)}for(const[i,f]of a(this,_)){if(a(this,_).delete(i),i===e)break;const n=a(this,u).get(f);n&&(y(n.effect),a(this,u).delete(f))}for(const[i,f]of a(this,o)){if(i===s||a(this,b).has(i))continue;const n=()=>{if(Array.from(a(this,_).values()).includes(i)){var l=document.createDocumentFragment();Q(f,l),l.append(F()),a(this,u).set(i,{effect:f,fragment:l})}else y(f);a(this,b).delete(i),a(this,o).delete(i)};a(this,p)||!r?(a(this,b).add(i),J(f,n,!1)):n()}}});v(this,T,e=>{a(this,_).delete(e);const s=Array.from(a(this,_).values());for(const[r,c]of a(this,u))s.includes(r)||(y(c.effect),a(this,u).delete(r))});this.anchor=e,Y(this,p,s)}ensure(e,s){var r=x,c=V();if(s&&!a(this,o).has(e)&&!a(this,u).has(e))if(c){var i=document.createDocumentFragment(),f=F();i.append(f),a(this,u).set(e,{effect:C(()=>s(f)),fragment:i})}else a(this,o).set(e,C(()=>s(this.anchor)));if(a(this,_).set(r,e),c){for(const[n,d]of a(this,o))n===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[n,d]of a(this,u))n===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(a(this,A)),r.ondiscard(a(this,T))}else D&&(this.anchor=K),a(this,A).call(this)}}_=new WeakMap,o=new WeakMap,u=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakMap,T=new WeakMap;function Ie(t,e,s=!1){D&&X();var r=new Ae(t),c=s?j:0;function i(f,n){if(D){const l=ee(t)===te;if(f===l){var d=se();ae(d),r.anchor=d,U(!1),r.ensure(f,n),U(!0);return}}r.ensure(f,n)}W(()=>{var f=!1;e((n,d=!0)=>{f=!0,i(d,n)}),f||i(!1,null)},c)}let R=!1;function Ee(t){var e=R;try{return R=!1,[t(),R]}finally{R=e}}function ye(t,e,s,r){var M;var c=!be||(s&ge)!==0,i=(s&le)!==0,f=(s&me)!==0,n=r,d=!0,l=()=>(d&&(d=!1,n=f?ve(r):r),n),S;if(i){var q=Pe in t||pe in t;S=((M=re(t,e))==null?void 0:M.set)??(q&&e in t?h=>t[e]=h:void 0)}var m,L=!1;i?[m,L]=Ee(()=>t[e]):m=t[e],m===void 0&&r!==void 0&&(m=l(),S&&(c&&ie(),S(m)));var g;if(c?g=()=>{var h=t[e];return h===void 0?l():(d=!0,h)}:g=()=>{var h=t[e];return h!==void 0&&(n=void 0),h===void 0?n:h},c&&(s&ne)===0)return g;if(S){var z=t.$$legacy;return(function(h,E){return arguments.length>0?((!c||!E||z||L)&&S(E?g():h),h):g()})}var I=!1,P=((s&Se)!==0?fe:ce)(()=>(I=!1,g()));i&&O(P);var G=_e;return(function(h,E){if(arguments.length>0){const w=E?O(P):c&&i?de(h):h;return he(P,w),I=!0,n!==void 0&&(n=w),h}return ue&&I||(G.f&oe)!==0?P.v:O(P)})}export{Ae as B,Ie as i,ye as p};
