var V=Object.defineProperty;var k=s=>{throw TypeError(s)};var W=(s,e,t)=>e in s?V(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var B=(s,e,t)=>W(s,typeof e!="symbol"?e+"":e,t),U=(s,e,t)=>e.has(s)||k("Cannot "+t);var r=(s,e,t)=>(U(s,e,"read from private field"),t?t.call(s):e.get(s)),v=(s,e,t)=>e.has(s)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Y=(s,e,t,a)=>(U(s,e,"write to private field"),a?a.call(s,t):e.set(s,t),t);import{D as F,F as X,G as D,H as j,A as x,I as C,o as M,z as ee,J as se,K as te,L as ae,q as re,M as ie,N as ne,O as fe,P as ue,C as ce,Q as $,R as de,S as he,b as G,U as le,V as H,W as q,X as _e,Y as oe,Z as ve,g as R,_ as be,$ as ge,a0 as Z,a1 as Se,a2 as pe,a3 as Pe,h as Ae,a4 as Ee,a5 as ye,a6 as Ie,y as Re,a7 as Te,a8 as Oe,a as De,a9 as Me,aa as Ne,ab as me,ac as Le}from"./BVfdGV4c.js";var l,_,h,b,A,E,T;class we{constructor(e,t=!0){B(this,"anchor");v(this,l,new Map);v(this,_,new Map);v(this,h,new Map);v(this,b,new Set);v(this,A,!0);v(this,E,()=>{var e=F;if(r(this,l).has(e)){var t=r(this,l).get(e),a=r(this,_).get(t);if(a)X(a),r(this,b).delete(t);else{var n=r(this,h).get(t);n&&(r(this,_).set(t,n.effect),r(this,h).delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),a=n.effect)}for(const[i,u]of r(this,l)){if(r(this,l).delete(i),i===e)break;const f=r(this,h).get(u);f&&(D(f.effect),r(this,h).delete(u))}for(const[i,u]of r(this,_)){if(i===t||r(this,b).has(i))continue;const f=()=>{if(Array.from(r(this,l).values()).includes(i)){var o=document.createDocumentFragment();se(u,o),o.append(x()),r(this,h).set(i,{effect:u,fragment:o})}else D(u);r(this,b).delete(i),r(this,_).delete(i)};r(this,A)||!a?(r(this,b).add(i),j(u,f,!1)):f()}}});v(this,T,e=>{r(this,l).delete(e);const t=Array.from(r(this,l).values());for(const[a,n]of r(this,h))t.includes(a)||(D(n.effect),r(this,h).delete(a))});this.anchor=e,Y(this,A,t)}ensure(e,t){var a=F,n=te();if(t&&!r(this,_).has(e)&&!r(this,h).has(e))if(n){var i=document.createDocumentFragment(),u=x();i.append(u),r(this,h).set(e,{effect:C(()=>t(u)),fragment:i})}else r(this,_).set(e,C(()=>t(this.anchor)));if(r(this,l).set(a,e),n){for(const[f,c]of r(this,_))f===e?a.skipped_effects.delete(c):a.skipped_effects.add(c);for(const[f,c]of r(this,h))f===e?a.skipped_effects.delete(c.effect):a.skipped_effects.add(c.effect);a.oncommit(r(this,E)),a.ondiscard(r(this,T))}else M&&(this.anchor=ee),r(this,E).call(this)}}l=new WeakMap,_=new WeakMap,h=new WeakMap,b=new WeakMap,A=new WeakMap,E=new WeakMap,T=new WeakMap;function Ye(s,e,t=!1){M&&re();var a=new we(s),n=t?ie:0;function i(u,f){if(M){const o=ne(s)===fe;if(u===o){var c=ue();ce(c),a.anchor=c,$(!1),a.ensure(u,f),$(!0);return}}a.ensure(u,f)}ae(()=>{var u=!1;e((f,c=!0)=>{u=!0,i(c,f)}),u||i(!1,null)},n)}function z(s,e){return s===e||(s==null?void 0:s[H])===e}function Fe(s={},e,t,a){return de(()=>{var n,i;return he(()=>{n=i,i=[],G(()=>{s!==t(...i)&&(e(s,...i),n&&z(t(...n),s)&&e(null,...n))})}),()=>{le(()=>{i&&z(t(...i),s)&&e(null,...i)})}}),s}let I=!1,N=Symbol();function xe(s,e,t){const a=t[e]??(t[e]={store:null,source:_e(void 0),unsubscribe:q});if(a.store!==s&&!(N in t))if(a.unsubscribe(),a.store=s??null,s==null)a.source.v=void 0,a.unsubscribe=q;else{var n=!0;a.unsubscribe=oe(s,i=>{n?a.source.v=i:Z(a.source,i)}),n=!1}return s&&N in t?ve(s):R(a.source)}function Ce(s,e){return s.set(e),e}function $e(){const s={};function e(){be(()=>{for(var t in s)s[t].unsubscribe();ge(s,N,{enumerable:!1,value:!0})})}return[s,e]}function ke(s){var e=I;try{return I=!1,[s(),I]}finally{I=e}}function qe(s,e,t,a){var L;var n=!De||(t&Me)!==0,i=(t&Oe)!==0,u=(t&me)!==0,f=a,c=!0,o=()=>(c&&(c=!1,f=u?G(a):a),f),S;if(i){var J=H in s||Le in s;S=((L=Se(s,e))==null?void 0:L.set)??(J&&e in s?d=>s[e]=d:void 0)}var p,m=!1;i?[p,m]=ke(()=>s[e]):p=s[e],p===void 0&&a!==void 0&&(p=o(),S&&(n&&pe(),S(p)));var g;if(n?g=()=>{var d=s[e];return d===void 0?o():(c=!0,d)}:g=()=>{var d=s[e];return d!==void 0&&(f=void 0),d===void 0?f:d},n&&(t&Pe)===0)return g;if(S){var K=s.$$legacy;return(function(d,y){return arguments.length>0?((!n||!y||K||m)&&S(y?g():d),d):g()})}var O=!1,P=((t&Ne)!==0?Ae:Ee)(()=>(O=!1,g()));i&&R(P);var Q=Re;return(function(d,y){if(arguments.length>0){const w=y?R(P):n&&i?ye(d):d;return Z(P,w),O=!0,f!==void 0&&(f=w),d}return Ie&&O||(Q.f&Te)!==0?P.v:R(P)})}export{we as B,$e as a,Fe as b,Ce as c,Ye as i,qe as p,xe as s};
