

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agent Services &mdash; Claude MPM API Reference 3.8.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dbb19ff3" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dbb19ff3" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=070f1fcc"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Communication Services" href="communication.html" />
    <link rel="prev" title="Services API" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            Claude MPM API Reference
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Core API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Services API</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Agent Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#agent-management">Agent Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#agent-deployment">Agent Deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#agent-lifecycle-management">Agent Lifecycle Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#agent-versioning">Agent Versioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#agent-registry">Agent Registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#agent-capabilities">Agent Capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-claude_mpm.agents.agent_loader">Agent Loaders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#unified-agent-loader-system">Unified Agent Loader System</a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.ComplexityLevel"><code class="docutils literal notranslate"><span class="pre">ComplexityLevel</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.ModelType"><code class="docutils literal notranslate"><span class="pre">ModelType</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.AgentTier"><code class="docutils literal notranslate"><span class="pre">AgentTier</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.AgentLoader"><code class="docutils literal notranslate"><span class="pre">AgentLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.load_agent_prompt_from_md"><code class="docutils literal notranslate"><span class="pre">load_agent_prompt_from_md()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_documentation_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_documentation_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_version_control_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_version_control_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_qa_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_qa_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_research_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_research_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_ops_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_ops_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_security_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_security_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_engineer_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_engineer_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_data_engineer_agent_prompt"><code class="docutils literal notranslate"><span class="pre">get_data_engineer_agent_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_agent_prompt_with_model_info"><code class="docutils literal notranslate"><span class="pre">get_agent_prompt_with_model_info()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.list_available_agents"><code class="docutils literal notranslate"><span class="pre">list_available_agents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.clear_agent_cache"><code class="docutils literal notranslate"><span class="pre">clear_agent_cache()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.list_agents_by_tier"><code class="docutils literal notranslate"><span class="pre">list_agents_by_tier()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.validate_agent_files"><code class="docutils literal notranslate"><span class="pre">validate_agent_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.reload_agents"><code class="docutils literal notranslate"><span class="pre">reload_agents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.agent_loader.get_agent_tier"><code class="docutils literal notranslate"><span class="pre">get_agent_tier()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.async_agent_loader.AgentTier"><code class="docutils literal notranslate"><span class="pre">AgentTier</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader"><code class="docutils literal notranslate"><span class="pre">AsyncAgentLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.async_agent_loader.load_agents_async"><code class="docutils literal notranslate"><span class="pre">load_agents_async()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#base-agent-loader-utility">Base Agent Loader Utility</a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.base_agent_loader.prepend_base_instructions"><code class="docutils literal notranslate"><span class="pre">prepend_base_instructions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.base_agent_loader.load_base_agent_instructions"><code class="docutils literal notranslate"><span class="pre">load_base_agent_instructions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.base_agent_loader.clear_base_agent_cache"><code class="docutils literal notranslate"><span class="pre">clear_base_agent_cache()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.base_agent_loader.get_base_agent_path"><code class="docutils literal notranslate"><span class="pre">get_base_agent_path()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.base_agent_loader.validate_base_agent_file"><code class="docutils literal notranslate"><span class="pre">validate_base_agent_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.base_agent_loader.PromptTemplate"><code class="docutils literal notranslate"><span class="pre">PromptTemplate</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-claude_mpm.agents.frontmatter_validator">Agent Validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#frontmatter-validator-for-agent-files">Frontmatter Validator for Agent Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.frontmatter_validator.ValidationResult"><code class="docutils literal notranslate"><span class="pre">ValidationResult</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator"><code class="docutils literal notranslate"><span class="pre">FrontmatterValidator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-claude_mpm.agents.agents_metadata">Agent Metadata</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#agent-metadata-definitions">Agent Metadata Definitions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="communication.html">Communication Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html">Infrastructure Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="project_services.html">Project Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_services.html">Core Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#service-domains">Service Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#architecture-benefits">Architecture Benefits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../agents/index.html">Agents API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hooks/index.html">Hooks API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">CLI API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">claude_mpm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../search.html">Search Page</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Claude MPM API Reference</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Services API</a></li>
      <li class="breadcrumb-item active">Agent Services</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/services/agent_services.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="agent-services">
<h1>Agent Services<a class="headerlink" href="#agent-services" title="Link to this heading"></a></h1>
<p>Agent services handle the lifecycle, deployment, and management of agents within the Claude MPM framework.</p>
<section id="agent-management">
<h2>Agent Management<a class="headerlink" href="#agent-management" title="Link to this heading"></a></h2>
</section>
<section id="agent-deployment">
<h2>Agent Deployment<a class="headerlink" href="#agent-deployment" title="Link to this heading"></a></h2>
</section>
<section id="agent-lifecycle-management">
<h2>Agent Lifecycle Management<a class="headerlink" href="#agent-lifecycle-management" title="Link to this heading"></a></h2>
</section>
<section id="agent-versioning">
<h2>Agent Versioning<a class="headerlink" href="#agent-versioning" title="Link to this heading"></a></h2>
</section>
<section id="agent-registry">
<h2>Agent Registry<a class="headerlink" href="#agent-registry" title="Link to this heading"></a></h2>
</section>
<section id="agent-capabilities">
<h2>Agent Capabilities<a class="headerlink" href="#agent-capabilities" title="Link to this heading"></a></h2>
</section>
<section id="module-claude_mpm.agents.agent_loader">
<span id="agent-loaders"></span><h2>Agent Loaders<a class="headerlink" href="#module-claude_mpm.agents.agent_loader" title="Link to this heading"></a></h2>
<section id="unified-agent-loader-system">
<h3>Unified Agent Loader System<a class="headerlink" href="#unified-agent-loader-system" title="Link to this heading"></a></h3>
<p>This module provides a unified system for loading and managing AI agent configurations
from JSON template files. It serves as the central registry for all agent types in the
Claude MPM system, handling discovery, validation, caching, and dynamic model selection.</p>
<section id="architecture-overview">
<h4>Architecture Overview:<a class="headerlink" href="#architecture-overview" title="Link to this heading"></a></h4>
<p>The agent loader follows a plugin-like architecture where agents are discovered from
JSON template files in a designated directory. Each agent is validated against a
standardized schema before being registered for use.</p>
</section>
<section id="key-features">
<h4>Key Features:<a class="headerlink" href="#key-features" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Automatic agent discovery from JSON files in configured agent directories</p></li>
<li><p>Schema validation ensures all agents conform to the expected structure</p></li>
<li><p>Intelligent caching using SharedPromptCache for performance optimization</p></li>
<li><p>Dynamic model selection based on task complexity analysis</p></li>
<li><p>Backward compatibility with legacy get_*_agent_prompt() functions</p></li>
<li><p>Prepends base instructions to maintain consistency across all agents</p></li>
</ul>
</section>
<section id="design-decisions">
<h4>Design Decisions:<a class="headerlink" href="#design-decisions" title="Link to this heading"></a></h4>
<ol class="arabic simple">
<li><p>JSON-based Configuration: We chose JSON over YAML or Python files for:
- Schema validation support
- Language-agnostic configuration
- Easy parsing and generation by tools</p></li>
<li><p>Lazy Loading with Caching: Agents are loaded on-demand and cached to:
- Reduce startup time
- Minimize memory usage for unused agents
- Allow hot-reloading during development</p></li>
<li><p>Dynamic Model Selection: The system can analyze task complexity to:
- Optimize cost by using appropriate model tiers
- Improve performance for simple tasks
- Ensure complex tasks get sufficient model capabilities</p></li>
</ol>
</section>
<section id="usage-examples">
<h4>Usage Examples:<a class="headerlink" href="#usage-examples" title="Link to this heading"></a></h4>
<blockquote>
<div><p>from claude_mpm.agents.agent_loader import get_documentation_agent_prompt</p>
<p># Get agent prompt using backward-compatible function
prompt = get_documentation_agent_prompt()</p>
<p># Get agent with model selection info
prompt, model, config = get_agent_prompt(“research_agent”,</p>
<blockquote>
<div><p>return_model_info=True,
task_description=”Analyze codebase”)</p>
</div></blockquote>
<p># List all available agents
agents = list_available_agents()</p>
</div></blockquote>
</section>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.ComplexityLevel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">ComplexityLevel</span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#ComplexityLevel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.ComplexityLevel" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Represents the complexity level of a task for model selection.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.ComplexityLevel.LOW">
<span class="sig-name descname"><span class="pre">LOW</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'LOW'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.ComplexityLevel.LOW" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.ComplexityLevel.MEDIUM">
<span class="sig-name descname"><span class="pre">MEDIUM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'MEDIUM'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.ComplexityLevel.MEDIUM" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.ComplexityLevel.HIGH">
<span class="sig-name descname"><span class="pre">HIGH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'HIGH'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.ComplexityLevel.HIGH" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.ModelType">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">ModelType</span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#ModelType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.ModelType" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Claude model tiers used for dynamic selection based on task complexity.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.ModelType.HAIKU">
<span class="sig-name descname"><span class="pre">HAIKU</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'haiku'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.ModelType.HAIKU" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.ModelType.SONNET">
<span class="sig-name descname"><span class="pre">SONNET</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'sonnet'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.ModelType.SONNET" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.ModelType.OPUS">
<span class="sig-name descname"><span class="pre">OPUS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'opus'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.ModelType.OPUS" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentTier">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">AgentTier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#AgentTier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentTier" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a></p>
<p>Agent precedence tiers.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentTier.PROJECT">
<span class="sig-name descname"><span class="pre">PROJECT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'project'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentTier.PROJECT" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentTier.USER">
<span class="sig-name descname"><span class="pre">USER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'user'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentTier.USER" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentTier.SYSTEM">
<span class="sig-name descname"><span class="pre">SYSTEM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'system'</span></em><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentTier.SYSTEM" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">AgentLoader</span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#AgentLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Central registry for loading and managing agent configurations.</p>
<p>This class implements the core agent discovery and management system. It:
1. Discovers agent JSON files from the agents directory
2. Validates each agent against the standardized schema
3. Maintains an in-memory registry of valid agents
4. Provides caching for performance optimization
5. Supports dynamic agent reloading</p>
<p>METRICS COLLECTION OPPORTUNITIES:
- Agent load times and cache hit rates
- Validation performance by agent type
- Agent usage frequency and patterns
- Model selection distribution
- Task complexity analysis results
- Memory usage for agent definitions
- Error rates during loading/validation
- Agent prompt size distributions</p>
<p>The loader follows a singleton-like pattern through the module-level
_loader instance to ensure consistent state across the application.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader.validator">
<span class="sig-name descname"><span class="pre">validator</span></span><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader.validator" title="Link to this definition"></a></dt>
<dd><p>AgentValidator instance for schema validation</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader.cache">
<span class="sig-name descname"><span class="pre">cache</span></span><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader.cache" title="Link to this definition"></a></dt>
<dd><p>SharedPromptCache instance for performance optimization</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader._agent_registry">
<span class="sig-name descname"><span class="pre">_agent_registry</span></span><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader._agent_registry" title="Link to this definition"></a></dt>
<dd><p>Internal dictionary mapping agent IDs to their configurations</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#AgentLoader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the agent loader and discover available agents.</p>
<p>The initialization process:
1. Creates validator for schema checking
2. Gets shared cache instance for performance
3. Initializes empty agent registry
4. Discovers template directories across all tiers
5. Triggers agent discovery and loading</p>
<p>METRICS OPPORTUNITIES:
- Track initialization time
- Monitor agent discovery performance
- Count total agents loaded vs validation failures
- Measure memory footprint of loaded agents</p>
<p>WHY: We load agents eagerly during initialization to:
- Detect configuration errors early
- Build the registry once for efficient access
- Validate all agents before the system starts using them</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader.get_agent">
<span class="sig-name descname"><span class="pre">get_agent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#AgentLoader.get_agent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader.get_agent" title="Link to this definition"></a></dt>
<dd><p>Retrieve agent configuration by ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>agent_id</strong> – Unique identifier for the agent (e.g., “research_agent”)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict containing the full agent configuration, or None if not found</p>
</dd>
</dl>
<p>WHY: Direct dictionary lookup for O(1) performance, essential for
frequently accessed agents during runtime.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader.list_agents">
<span class="sig-name descname"><span class="pre">list_agents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#AgentLoader.list_agents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader.list_agents" title="Link to this definition"></a></dt>
<dd><p>Get a summary list of all available agents.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of agent summaries containing key metadata fields</p>
</dd>
</dl>
<p>WHY: We return a summary instead of full configurations to:
- Reduce memory usage when listing many agents
- Provide only the information needed for agent selection
- Keep the API response size manageable</p>
<p>The returned list is sorted by ID for consistent ordering across calls.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader.get_agent_prompt">
<span class="sig-name descname"><span class="pre">get_agent_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_reload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#AgentLoader.get_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader.get_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Retrieve agent instructions/prompt by ID with caching support.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_id</strong> – Unique identifier for the agent</p></li>
<li><p><strong>force_reload</strong> – If True, bypass cache and reload from registry</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The agent’s instruction prompt, or None if not found</p>
</dd>
</dl>
<p>Caching Strategy:
- Prompts are cached for 1 hour (3600 seconds) by default
- Cache keys are versioned (v2:) to allow bulk invalidation
- Force reload bypasses cache for development/debugging</p>
<p>METRICS TRACKED:
- Cache hit/miss rates for optimization
- Agent usage frequency for popular agents
- Prompt loading times for performance
- Prompt sizes for memory analysis</p>
<p>WHY: Caching is critical here because:
- Agent prompts can be large (several KB)
- They’re accessed frequently during agent execution
- They rarely change in production
- The 1-hour TTL balances freshness with performance</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader.get_metrics">
<span class="sig-name descname"><span class="pre">get_metrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#AgentLoader.get_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader.get_metrics" title="Link to this definition"></a></dt>
<dd><p>Get collected performance metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>Cache performance (hit rate, miss rate)</p></li>
<li><p>Agent usage statistics</p></li>
<li><p>Load time analysis</p></li>
<li><p>Memory usage patterns</p></li>
<li><p>Error tracking</p></li>
<li><p>Tier distribution</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary containing</p>
</dd>
</dl>
<p>This data could be:
- Exposed via monitoring endpoints
- Logged periodically for analysis
- Used for capacity planning
- Fed to AI operations platforms</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.AgentLoader.get_agent_metadata">
<span class="sig-name descname"><span class="pre">get_agent_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#AgentLoader.get_agent_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.AgentLoader.get_agent_metadata" title="Link to this definition"></a></dt>
<dd><p>Get comprehensive agent metadata including capabilities and configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>agent_id</strong> – Unique identifier for the agent</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary containing all agent metadata except instructions,
or None if agent not found</p>
</dd>
</dl>
<p>WHY: This method provides access to agent configuration without
including the potentially large instruction text. This is useful for:
- UI displays showing agent capabilities
- Programmatic agent selection based on features
- Debugging and introspection</p>
<p>The returned structure mirrors the JSON schema sections for consistency.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.load_agent_prompt_from_md">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">load_agent_prompt_from_md</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_reload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#load_agent_prompt_from_md"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.load_agent_prompt_from_md" title="Link to this definition"></a></dt>
<dd><p>Load agent prompt from JSON template (legacy function name).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_name</strong> – Agent name (matches agent ID in new schema)</p></li>
<li><p><strong>force_reload</strong> – Force reload from file, bypassing cache</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Agent instructions from JSON template, or None if not found</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
<p>NOTE: Despite the “md” in the function name, this loads from JSON files.
The name is kept for backward compatibility with existing code that
expects this interface. New code should use get_agent_prompt() directly.</p>
<p>WHY: This wrapper exists to maintain backward compatibility during the
migration from markdown-based agents to JSON-based agents.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_agent_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_reload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_model_info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.13)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get agent prompt with optional dynamic model selection and base instructions.</p>
<p>This is the primary interface for retrieving agent prompts. It handles:
1. Loading the agent’s instructions from the registry
2. Optionally analyzing task complexity for model selection
3. Prepending base instructions for consistency
4. Adding metadata about model selection decisions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_name</strong> – Agent name in any format (e.g., “Engineer”, “research_agent”, “QA”)</p></li>
<li><p><strong>force_reload</strong> – Force reload from source, bypassing cache</p></li>
<li><p><strong>return_model_info</strong> – If True, returns extended info tuple</p></li>
<li><p><strong>**kwargs</strong> – Additional arguments:
- task_description: Description for complexity analysis
- context_size: Size of context in characters
- enable_complexity_analysis: Toggle complexity analysis (default: True)
- Additional task-specific parameters</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Complete agent prompt string
If return_model_info=True: Tuple of (prompt, selected_model, model_config)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>If return_model_info=False</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – If the requested agent is not found</p>
</dd>
</dl>
<p>Processing Flow:
1. Normalize agent name to correct agent ID
2. Load agent instructions (with caching)
3. Analyze task complexity (if enabled and task_description provided)
4. Determine optimal model based on complexity
5. Add model selection metadata to prompt
6. Prepend base instructions
7. Return appropriate format based on return_model_info</p>
<p>WHY: This comprehensive approach ensures:
- Consistent prompt structure across all agents
- Optimal model selection for cost/performance
- Transparency in model selection decisions
- Flexibility for different use cases</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_documentation_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_documentation_agent_prompt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_documentation_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_documentation_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get the complete Documentation Agent prompt with base instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complete prompt string ready for use with Claude API</p>
</dd>
</dl>
<p>DEPRECATED: Use get_agent_prompt(“documentation_agent”) instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_version_control_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_version_control_agent_prompt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_version_control_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_version_control_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get the complete Version Control Agent prompt with base instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complete prompt string ready for use with Claude API</p>
</dd>
</dl>
<p>DEPRECATED: Use get_agent_prompt(“version_control_agent”) instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_qa_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_qa_agent_prompt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_qa_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_qa_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get the complete QA Agent prompt with base instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complete prompt string ready for use with Claude API</p>
</dd>
</dl>
<p>DEPRECATED: Use get_agent_prompt(“qa_agent”) instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_research_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_research_agent_prompt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_research_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_research_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get the complete Research Agent prompt with base instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complete prompt string ready for use with Claude API</p>
</dd>
</dl>
<p>DEPRECATED: Use get_agent_prompt(“research_agent”) instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_ops_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_ops_agent_prompt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_ops_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_ops_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get the complete Ops Agent prompt with base instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complete prompt string ready for use with Claude API</p>
</dd>
</dl>
<p>DEPRECATED: Use get_agent_prompt(“ops_agent”) instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_security_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_security_agent_prompt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_security_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_security_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get the complete Security Agent prompt with base instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complete prompt string ready for use with Claude API</p>
</dd>
</dl>
<p>DEPRECATED: Use get_agent_prompt(“security_agent”) instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_engineer_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_engineer_agent_prompt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_engineer_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_engineer_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get the complete Engineer Agent prompt with base instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complete prompt string ready for use with Claude API</p>
</dd>
</dl>
<p>DEPRECATED: Use get_agent_prompt(“engineer_agent”) instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_data_engineer_agent_prompt">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_data_engineer_agent_prompt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_data_engineer_agent_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_data_engineer_agent_prompt" title="Link to this definition"></a></dt>
<dd><p>Get the complete Data Engineer Agent prompt with base instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complete prompt string ready for use with Claude API</p>
</dd>
</dl>
<p>DEPRECATED: Use get_agent_prompt(“data_engineer_agent”) instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_agent_prompt_with_model_info">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_agent_prompt_with_model_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_reload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.13)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_agent_prompt_with_model_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_agent_prompt_with_model_info" title="Link to this definition"></a></dt>
<dd><p>Convenience wrapper to always get agent prompt with model selection information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_name</strong> – Agent ID (e.g., “research_agent”)</p></li>
<li><p><strong>force_reload</strong> – Force reload from source, bypassing cache</p></li>
<li><p><strong>**kwargs</strong> – Additional arguments for prompt generation and model selection
- task_description: For complexity analysis
- context_size: For complexity scoring
- Other task-specific parameters</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>prompt: Complete agent prompt with base instructions</p></li>
<li><p>selected_model: Claude API model identifier</p></li>
<li><p>model_config: Dictionary with selection metadata</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple of (prompt, selected_model, model_config) where</p>
</dd>
</dl>
<p>WHY: This dedicated function ensures type safety for callers that always
need model information, avoiding the need to handle Union types.</p>
<p class="rubric">Example</p>
<dl class="simple">
<dt>prompt, model, config = get_agent_prompt_with_model_info(</dt><dd><p>“research_agent”,
task_description=”Analyze Python codebase architecture”</p>
</dd>
</dl>
<p>)
print(f”Using model: {model} (method: {config[‘selection_method’]})”)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.list_available_agents">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">list_available_agents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#list_available_agents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.list_available_agents" title="Link to this definition"></a></dt>
<dd><p>List all available agents with their key metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary mapping agent IDs to their metadata summaries</p>
</dd>
</dl>
<p>The returned dictionary provides a comprehensive view of all registered
agents, useful for:
- UI agent selection interfaces
- Documentation generation
- System introspection and debugging
- Programmatic agent discovery</p>
<dl>
<dt>Example Return Value:</dt><dd><dl class="simple">
<dt>{</dt><dd><dl class="simple">
<dt>“research_agent”: {</dt><dd><p>“name”: “Research Agent”,
“description”: “Analyzes codebases…”,
“category”: “analysis”,
“version”: “1.0.0”,
“model”: “claude-opus-4-20250514”,
“resource_tier”: “standard”,
“tools”: [“code_analysis”, “search”]</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>WHY: This aggregated view is more useful than raw agent data because:
- It provides a consistent interface regardless of schema changes
- It includes only the fields relevant for agent selection
- It’s optimized for UI display and decision making</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.clear_agent_cache">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">clear_agent_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#clear_agent_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.clear_agent_cache" title="Link to this definition"></a></dt>
<dd><p>Clear cached agent prompts for development or after updates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>agent_name</strong> – Specific agent ID to clear, or None to clear all agents</p>
</dd>
</dl>
<p>This function is useful for:
- Development when modifying agent prompts
- Forcing reload after agent template updates
- Troubleshooting caching issues
- Memory management in long-running processes</p>
<p class="rubric">Examples</p>
<p># Clear specific agent cache
clear_agent_cache(“research_agent”)</p>
<p># Clear all agent caches
clear_agent_cache()</p>
<p>WHY: Manual cache management is important because:
- Agent prompts have a 1-hour TTL but may need immediate refresh
- Development requires seeing changes without waiting for TTL
- System administrators need cache control for troubleshooting</p>
<p>Error Handling: Failures are logged but don’t raise exceptions to ensure
the system remains operational even if cache clearing fails.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.list_agents_by_tier">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">list_agents_by_tier</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#list_agents_by_tier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.list_agents_by_tier" title="Link to this definition"></a></dt>
<dd><p>List available agents organized by their tier.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary mapping tier names to lists of agent IDs available in that tier</p>
</dd>
</dl>
<p class="rubric">Example</p>
<dl class="simple">
<dt>{</dt><dd><p>“project”: [“engineer_agent”, “custom_agent”],
“user”: [“research_agent”],
“system”: [“engineer_agent”, “research_agent”, “qa_agent”, …]</p>
</dd>
</dl>
<p>}</p>
<p>This is useful for:
- Understanding which agents are available at each level
- Debugging agent precedence issues
- UI display of agent sources</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.validate_agent_files">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">validate_agent_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#validate_agent_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.validate_agent_files" title="Link to this definition"></a></dt>
<dd><p>Validate all agent template files against the schema.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary mapping agent names to validation results</p>
</dd>
</dl>
<p>This function performs comprehensive validation of all agent files,
checking for:
- JSON syntax errors
- Schema compliance
- Required fields presence
- Data type correctness
- Constraint violations</p>
<dl>
<dt>Return Format:</dt><dd><dl class="simple">
<dt>{</dt><dd><dl class="simple">
<dt>“agent_name”: {</dt><dd><p>“valid”: bool,
“errors”: [list of error messages],
“warnings”: [list of warning messages],
“file_path”: “/full/path/to/file.json”</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>Use Cases:
- Pre-deployment validation in CI/CD
- Development-time agent verification
- Troubleshooting agent loading issues
- Automated testing of agent configurations</p>
<p>WHY: Separate validation allows checking agents without loading them,
useful for CI/CD pipelines and development workflows where we want to
catch errors before runtime.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.reload_agents">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">reload_agents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#reload_agents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.reload_agents" title="Link to this definition"></a></dt>
<dd><p>Force reload all agents from disk, clearing the registry and cache.</p>
<p>This function completely resets the agent loader state, causing:
1. The global loader instance to be destroyed
2. All cached agent prompts to be invalidated
3. Fresh agent discovery on next access across all tiers</p>
<p>Use Cases:
- Hot-reloading during development
- Picking up new agent files without restart
- Recovering from corrupted state
- Testing agent loading logic
- Switching between projects with different agents</p>
<p>WHY: Hot-reloading is essential for development productivity and
allows dynamic agent updates in production without service restart.</p>
<p>Implementation Note: We simply clear the global loader reference.
The next call to _get_loader() will create a fresh instance that
re-discovers and re-validates all agents across all tiers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.agent_loader.get_agent_tier">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_agent_tier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/agent_loader.html#get_agent_tier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.agent_loader.get_agent_tier" title="Link to this definition"></a></dt>
<dd><p>Get the tier from which an agent was loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>agent_name</strong> – Agent name or ID</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tier name (“project”, “user”, or “system”) or None if not found</p>
</dd>
</dl>
<p>This is useful for debugging and understanding which version of an
agent is being used when multiple versions exist across tiers.</p>
</dd></dl>

<p id="module-claude_mpm.agents.async_agent_loader">Async Agent Loader for high-performance parallel agent discovery and loading.</p>
<p>This module provides async versions of agent loading operations to significantly
reduce startup time through parallel file I/O and concurrent processing.</p>
<p>WHY: The synchronous agent loader creates performance bottlenecks:
- Sequential directory scanning across PROJECT/USER/SYSTEM tiers
- Blocking file I/O for each agent JSON/MD file
- Sequential validation of each agent
- Total time grows linearly with agent count</p>
<p>This async version provides:
- 60-80% reduction in agent discovery time
- Parallel loading across all tiers simultaneously
- Non-blocking file I/O with aiofiles
- Concurrent validation and parsing</p>
<p>DESIGN DECISIONS:
- Maintain compatibility with existing AgentLoader interface
- Use asyncio.gather() for parallel operations
- Leverage thread pool for CPU-bound JSON parsing
- Graceful fallback to sync operations if needed</p>
<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AgentTier">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.async_agent_loader.</span></span><span class="sig-name descname"><span class="pre">AgentTier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AgentTier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AgentTier" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a></p>
<p>Agent precedence tiers.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AgentTier.PROJECT">
<span class="sig-name descname"><span class="pre">PROJECT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'project'</span></em><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AgentTier.PROJECT" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AgentTier.USER">
<span class="sig-name descname"><span class="pre">USER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'user'</span></em><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AgentTier.USER" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AgentTier.SYSTEM">
<span class="sig-name descname"><span class="pre">SYSTEM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'system'</span></em><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AgentTier.SYSTEM" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.async_agent_loader.</span></span><span class="sig-name descname"><span class="pre">AsyncAgentLoader</span></span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Async agent loader for high-performance parallel operations.</p>
<p>WHY: This async loader provides:
- 60-80% faster agent discovery through parallel tier scanning
- Non-blocking file I/O for all agent files
- Concurrent validation and parsing
- Seamless integration with existing code</p>
<p>PERFORMANCE METRICS (typical):
- Sync loading: 300-500ms for 10 agents across 3 tiers
- Async loading: 80-150ms for same (70-80% reduction)
- Scales better with more agents (near-constant time)</p>
<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize async agent loader.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader.discover_agent_dirs_async">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">discover_agent_dirs_async</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#claude_mpm.agents.async_agent_loader.AgentTier" title="claude_mpm.agents.async_agent_loader.AgentTier"><span class="pre">AgentTier</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader.discover_agent_dirs_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader.discover_agent_dirs_async" title="Link to this definition"></a></dt>
<dd><p>Discover agent directories across all tiers in parallel.</p>
<p>WHY: Checking directory existence across PROJECT/USER/SYSTEM tiers
sequentially adds unnecessary latency. Parallel checking reduces
this to the time of the slowest check.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary mapping tiers to their directories</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader.load_agents_from_dir_async">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_agents_from_dir_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#claude_mpm.agents.async_agent_loader.AgentTier" title="claude_mpm.agents.async_agent_loader.AgentTier"><span class="pre">AgentTier</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader.load_agents_from_dir_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader.load_agents_from_dir_async" title="Link to this definition"></a></dt>
<dd><p>Load all agents from a directory asynchronously.</p>
<p>WHY: Loading multiple agent files sequentially is slow.
This method discovers and loads all files in parallel,
dramatically reducing I/O wait time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> – Directory containing agent files</p></li>
<li><p><strong>tier</strong> – The tier this directory belongs to</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of loaded agent configurations</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader.load_json_agent_async">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_json_agent_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader.load_json_agent_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader.load_json_agent_async" title="Link to this definition"></a></dt>
<dd><p>Load a JSON agent file asynchronously.</p>
<p>WHY: JSON files require file I/O (async) and parsing (CPU-bound).
We use aiofiles for non-blocking reads and thread pool for parsing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> – Path to JSON agent file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Parsed agent configuration or None if failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader.load_md_agent_async">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_md_agent_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader.load_md_agent_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader.load_md_agent_async" title="Link to this definition"></a></dt>
<dd><p>Load a Markdown agent file with YAML frontmatter asynchronously.</p>
<p>WHY: MD files with frontmatter require parsing both YAML and markdown.
Async loading prevents blocking on file I/O.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> – Path to MD agent file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Parsed agent configuration or None if failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader.load_all_agents_async">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_all_agents_async</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader.load_all_agents_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader.load_all_agents_async" title="Link to this definition"></a></dt>
<dd><p>Load all agents from all tiers in parallel.</p>
<p>WHY: This is the main performance optimization - loading agents
from PROJECT, USER, and SYSTEM tiers simultaneously reduces
total load time to that of the slowest tier.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of all loaded agents by ID</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader.cleanup">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cleanup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader.cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader.cleanup" title="Link to this definition"></a></dt>
<dd><p>Clean up resources.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.AsyncAgentLoader.get_metrics">
<span class="sig-name descname"><span class="pre">get_metrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#AsyncAgentLoader.get_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.AsyncAgentLoader.get_metrics" title="Link to this definition"></a></dt>
<dd><p>Get performance metrics.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.async_agent_loader.load_agents_async">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.async_agent_loader.</span></span><span class="sig-name descname"><span class="pre">load_agents_async</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/async_agent_loader.html#load_agents_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.async_agent_loader.load_agents_async" title="Link to this definition"></a></dt>
<dd><p>Load all agents using async operations.</p>
<p>WHY: This wrapper allows async agent loading from synchronous code,
providing significant performance improvements without requiring
a full async refactor of the codebase.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of loaded agents by ID</p>
</dd>
</dl>
</dd></dl>

<section id="base-agent-loader-utility">
<span id="module-claude_mpm.agents.base_agent_loader"></span><h3>Base Agent Loader Utility<a class="headerlink" href="#base-agent-loader-utility" title="Link to this heading"></a></h3>
<p>Provides functionality to load and prepend base agent instructions to all agent prompts.
Integrates with SharedPromptCache for performance optimization.</p>
<p>Key Features:
- Load base_agent.md content with caching
- Prepend base instructions to agent prompts
- Thread-safe operations
- Error handling for missing base instructions
- Integration with SharedPromptCache
- Dynamic prompt templates based on task complexity</p>
<dl>
<dt>Usage:</dt><dd><p>from claude_pm.agents.base_agent_loader import prepend_base_instructions</p>
<p># Get agent prompt with base instructions prepended
full_prompt = prepend_base_instructions(get_documentation_agent_prompt())</p>
</dd>
</dl>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.prepend_base_instructions">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.base_agent_loader.</span></span><span class="sig-name descname"><span class="pre">prepend_base_instructions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'\n\n---\n\n'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#claude_mpm.agents.base_agent_loader.PromptTemplate" title="claude_mpm.agents.base_agent_loader.PromptTemplate"><span class="pre">PromptTemplate</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">complexity_score</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/base_agent_loader.html#prepend_base_instructions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.prepend_base_instructions" title="Link to this definition"></a></dt>
<dd><p>Prepend base agent instructions to an agent-specific prompt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_prompt</strong> – The agent-specific prompt to prepend to</p></li>
<li><p><strong>separator</strong> – String to separate base instructions from agent prompt</p></li>
<li><p><strong>template</strong> – Optional template level to use (auto-selected if not provided)</p></li>
<li><p><strong>complexity_score</strong> – Optional complexity score for template selection</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Combined prompt with base instructions prepended</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.load_base_agent_instructions">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.base_agent_loader.</span></span><span class="sig-name descname"><span class="pre">load_base_agent_instructions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force_reload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/base_agent_loader.html#load_base_agent_instructions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.load_base_agent_instructions" title="Link to this definition"></a></dt>
<dd><p>Load base agent instructions from base_agent.json with caching.
Conditionally includes test-mode instructions based on CLAUDE_PM_TEST_MODE.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>force_reload</strong> – Force reload from file, bypassing cache</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Base agent instructions content, or None if file not found</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.clear_base_agent_cache">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.base_agent_loader.</span></span><span class="sig-name descname"><span class="pre">clear_base_agent_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/base_agent_loader.html#clear_base_agent_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.clear_base_agent_cache" title="Link to this definition"></a></dt>
<dd><p>Clear the cached base agent instructions for all templates and modes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.get_base_agent_path">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.base_agent_loader.</span></span><span class="sig-name descname"><span class="pre">get_base_agent_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/base_agent_loader.html#get_base_agent_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.get_base_agent_path" title="Link to this definition"></a></dt>
<dd><p>Get the path to the base agent instructions file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.validate_base_agent_file">
<span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.base_agent_loader.</span></span><span class="sig-name descname"><span class="pre">validate_base_agent_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/base_agent_loader.html#validate_base_agent_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.validate_base_agent_file" title="Link to this definition"></a></dt>
<dd><p>Validate that base agent file exists and is readable.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if file exists and is readable, False otherwise</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.PromptTemplate">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.base_agent_loader.</span></span><span class="sig-name descname"><span class="pre">PromptTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/claude_mpm/agents/base_agent_loader.html#PromptTemplate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.PromptTemplate" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a></p>
<p>Dynamic prompt template levels.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.PromptTemplate.MINIMAL">
<span class="sig-name descname"><span class="pre">MINIMAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'MINIMAL'</span></em><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.PromptTemplate.MINIMAL" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.PromptTemplate.STANDARD">
<span class="sig-name descname"><span class="pre">STANDARD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'STANDARD'</span></em><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.PromptTemplate.STANDARD" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.base_agent_loader.PromptTemplate.FULL">
<span class="sig-name descname"><span class="pre">FULL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'FULL'</span></em><a class="headerlink" href="#claude_mpm.agents.base_agent_loader.PromptTemplate.FULL" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-claude_mpm.agents.frontmatter_validator">
<span id="agent-validation"></span><h2>Agent Validation<a class="headerlink" href="#module-claude_mpm.agents.frontmatter_validator" title="Link to this heading"></a></h2>
<section id="frontmatter-validator-for-agent-files">
<h3>Frontmatter Validator for Agent Files<a class="headerlink" href="#frontmatter-validator-for-agent-files" title="Link to this heading"></a></h3>
<p>This module provides validation and automatic correction for agent file frontmatter
in .md, .claude, and .claude-mpm files. It ensures consistency and compatibility
across different agent file formats.</p>
<p>Key Features:
- Validates frontmatter against a defined schema
- Automatically corrects common formatting issues
- Normalizes model names to standard tiers (opus, sonnet, haiku)
- Fixes tools field when provided as string representation
- Provides detailed logging of corrections made</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.ValidationResult">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.frontmatter_validator.</span></span><span class="sig-name descname"><span class="pre">ValidationResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_valid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warnings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corrections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corrected_frontmatter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_corrections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/claude_mpm/agents/frontmatter_validator.html#ValidationResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.ValidationResult" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Result of frontmatter validation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.ValidationResult.is_valid">
<span class="sig-name descname"><span class="pre">is_valid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.ValidationResult.is_valid" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.ValidationResult.errors">
<span class="sig-name descname"><span class="pre">errors</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.ValidationResult.errors" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.ValidationResult.warnings">
<span class="sig-name descname"><span class="pre">warnings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.ValidationResult.warnings" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.ValidationResult.corrections">
<span class="sig-name descname"><span class="pre">corrections</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.ValidationResult.corrections" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.ValidationResult.corrected_frontmatter">
<span class="sig-name descname"><span class="pre">corrected_frontmatter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.ValidationResult.corrected_frontmatter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.ValidationResult.field_corrections">
<span class="sig-name descname"><span class="pre">field_corrections</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.ValidationResult.field_corrections" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.ValidationResult.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_valid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warnings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corrections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corrected_frontmatter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_corrections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.ValidationResult.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">claude_mpm.agents.frontmatter_validator.</span></span><span class="sig-name descname"><span class="pre">FrontmatterValidator</span></span><a class="reference internal" href="../_modules/claude_mpm/agents/frontmatter_validator.html#FrontmatterValidator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Validates and corrects frontmatter in agent files.</p>
<p>This class handles:
- Schema validation against frontmatter_schema.json
- Automatic correction of common issues
- Model name normalization
- Tools field parsing and correction
- Logging of all corrections made</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator.MODEL_MAPPINGS">
<span class="sig-name descname"><span class="pre">MODEL_MAPPINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'20240620':</span> <span class="pre">'sonnet',</span> <span class="pre">'20241022':</span> <span class="pre">'sonnet',</span> <span class="pre">'3-haiku':</span> <span class="pre">'haiku',</span> <span class="pre">'3-opus':</span> <span class="pre">'opus',</span> <span class="pre">'3.5-sonnet':</span> <span class="pre">'sonnet',</span> <span class="pre">'claude-3-5-haiku-20241022':</span> <span class="pre">'haiku',</span> <span class="pre">'claude-3-5-sonnet-20240620':</span> <span class="pre">'sonnet',</span> <span class="pre">'claude-3-5-sonnet-20241022':</span> <span class="pre">'sonnet',</span> <span class="pre">'claude-3-haiku-20240307':</span> <span class="pre">'haiku',</span> <span class="pre">'claude-3-opus-20240229':</span> <span class="pre">'opus',</span> <span class="pre">'claude-3-sonnet-20240229':</span> <span class="pre">'sonnet',</span> <span class="pre">'claude-4-opus-20250514':</span> <span class="pre">'opus',</span> <span class="pre">'claude-4-sonnet-20250514':</span> <span class="pre">'sonnet',</span> <span class="pre">'claude-opus-4-20250514':</span> <span class="pre">'opus',</span> <span class="pre">'claude-sonnet-4-20250514':</span> <span class="pre">'sonnet',</span> <span class="pre">'haiku-3':</span> <span class="pre">'haiku',</span> <span class="pre">'haiku-3.5':</span> <span class="pre">'haiku',</span> <span class="pre">'opus-3':</span> <span class="pre">'opus',</span> <span class="pre">'opus-4':</span> <span class="pre">'opus',</span> <span class="pre">'sonnet-3.5':</span> <span class="pre">'sonnet',</span> <span class="pre">'sonnet-4':</span> <span class="pre">'sonnet'}</span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator.MODEL_MAPPINGS" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator.TOOL_CORRECTIONS">
<span class="sig-name descname"><span class="pre">TOOL_CORRECTIONS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'bash':</span> <span class="pre">'Bash',</span> <span class="pre">'edit':</span> <span class="pre">'Edit',</span> <span class="pre">'exitplanmode':</span> <span class="pre">'ExitPlanMode',</span> <span class="pre">'glob':</span> <span class="pre">'Glob',</span> <span class="pre">'grep':</span> <span class="pre">'Grep',</span> <span class="pre">'ls':</span> <span class="pre">'LS',</span> <span class="pre">'multiedit':</span> <span class="pre">'MultiEdit',</span> <span class="pre">'notebookedit':</span> <span class="pre">'NotebookEdit',</span> <span class="pre">'notebookread':</span> <span class="pre">'NotebookRead',</span> <span class="pre">'read':</span> <span class="pre">'Read',</span> <span class="pre">'todowrite':</span> <span class="pre">'TodoWrite',</span> <span class="pre">'webfetch':</span> <span class="pre">'WebFetch',</span> <span class="pre">'websearch':</span> <span class="pre">'WebSearch',</span> <span class="pre">'write':</span> <span class="pre">'Write'}</span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator.TOOL_CORRECTIONS" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator.VALID_TOOLS">
<span class="sig-name descname"><span class="pre">VALID_TOOLS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'Bash',</span> <span class="pre">'Edit',</span> <span class="pre">'ExitPlanMode',</span> <span class="pre">'Glob',</span> <span class="pre">'Grep',</span> <span class="pre">'LS',</span> <span class="pre">'MultiEdit',</span> <span class="pre">'NotebookEdit',</span> <span class="pre">'NotebookRead',</span> <span class="pre">'Read',</span> <span class="pre">'TodoWrite',</span> <span class="pre">'WebFetch',</span> <span class="pre">'WebSearch',</span> <span class="pre">'Write',</span> <span class="pre">'aws',</span> <span class="pre">'azure',</span> <span class="pre">'docker',</span> <span class="pre">'gcloud',</span> <span class="pre">'git',</span> <span class="pre">'kubectl',</span> <span class="pre">'terraform'}</span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator.VALID_TOOLS" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator.VALID_MODELS">
<span class="sig-name descname"><span class="pre">VALID_MODELS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'haiku',</span> <span class="pre">'opus',</span> <span class="pre">'sonnet'}</span></em><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator.VALID_MODELS" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/claude_mpm/agents/frontmatter_validator.html#FrontmatterValidator.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the validator with schema if available.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator.validate_and_correct">
<span class="sig-name descname"><span class="pre">validate_and_correct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frontmatter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#claude_mpm.agents.frontmatter_validator.ValidationResult" title="claude_mpm.agents.frontmatter_validator.ValidationResult"><span class="pre">ValidationResult</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/frontmatter_validator.html#FrontmatterValidator.validate_and_correct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator.validate_and_correct" title="Link to this definition"></a></dt>
<dd><p>Validate and automatically correct frontmatter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>frontmatter</strong> – Dictionary of frontmatter fields</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ValidationResult with validation status and corrected frontmatter</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator.validate_file">
<span class="sig-name descname"><span class="pre">validate_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#claude_mpm.agents.frontmatter_validator.ValidationResult" title="claude_mpm.agents.frontmatter_validator.ValidationResult"><span class="pre">ValidationResult</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/frontmatter_validator.html#FrontmatterValidator.validate_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator.validate_file" title="Link to this definition"></a></dt>
<dd><p>Validate frontmatter in a specific file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> – Path to agent file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ValidationResult with validation status</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="claude_mpm.agents.frontmatter_validator.FrontmatterValidator.correct_file">
<span class="sig-name descname"><span class="pre">correct_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#claude_mpm.agents.frontmatter_validator.ValidationResult" title="claude_mpm.agents.frontmatter_validator.ValidationResult"><span class="pre">ValidationResult</span></a></span></span><a class="reference internal" href="../_modules/claude_mpm/agents/frontmatter_validator.html#FrontmatterValidator.correct_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#claude_mpm.agents.frontmatter_validator.FrontmatterValidator.correct_file" title="Link to this definition"></a></dt>
<dd><p>Validate and optionally correct a file’s frontmatter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> – Path to agent file</p></li>
<li><p><strong>dry_run</strong> – If True, don’t write changes to file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ValidationResult with corrections made</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-claude_mpm.agents.agents_metadata">
<span id="agent-metadata"></span><h2>Agent Metadata<a class="headerlink" href="#module-claude_mpm.agents.agents_metadata" title="Link to this heading"></a></h2>
<section id="agent-metadata-definitions">
<h3>Agent Metadata Definitions<a class="headerlink" href="#agent-metadata-definitions" title="Link to this heading"></a></h3>
<p>Preserves AGENT_CONFIG metadata for all agents.
This metadata is used for agent registration, capability tracking, and performance targets.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Services API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="communication.html" class="btn btn-neutral float-right" title="Communication Services" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Claude MPM Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>