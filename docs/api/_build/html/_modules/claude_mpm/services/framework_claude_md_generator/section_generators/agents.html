

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>claude_mpm.services.framework_claude_md_generator.section_generators.agents &mdash; Claude MPM API Reference 3.8.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/custom.css?v=dbb19ff3" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/custom.css?v=dbb19ff3" />

  
      <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../_static/documentation_options.js?v=070f1fcc"></script>
      <script src="../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            Claude MPM API Reference
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Core API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../core/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../services/index.html">Services API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../agents/index.html">Agents API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../hooks/index.html">Hooks API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../cli/index.html">CLI API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../modules.html">claude_mpm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../search.html">Search Page</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Claude MPM API Reference</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../../services.html">claude_mpm.services</a></li>
          <li class="breadcrumb-item"><a href="../../framework_claude_md_generator.html">claude_mpm.services.framework_claude_md_generator</a></li>
          <li class="breadcrumb-item"><a href="../section_generators.html">claude_mpm.services.framework_claude_md_generator.section_generators</a></li>
      <li class="breadcrumb-item active">claude_mpm.services.framework_claude_md_generator.section_generators.agents</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for claude_mpm.services.framework_claude_md_generator.section_generators.agents</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Agents section generator for framework CLAUDE.md.</span>

<span class="sd">This is the largest section generator, containing all agent definitions,</span>
<span class="sd">hierarchy, delegation patterns, and registry integration documentation.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSectionGenerator</span>


<div class="viewcode-block" id="AgentsGenerator">
<a class="viewcode-back" href="../../../../../claude_mpm.services.framework_claude_md_generator.section_generators.agents.html#claude_mpm.services.framework_claude_md_generator.section_generators.agents.AgentsGenerator">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AgentsGenerator</span><span class="p">(</span><span class="n">BaseSectionGenerator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates the comprehensive Agents section.&quot;&quot;&quot;</span>
    
<div class="viewcode-block" id="AgentsGenerator.generate">
<a class="viewcode-back" href="../../../../../claude_mpm.services.framework_claude_md_generator.section_generators.agents.html#claude_mpm.services.framework_claude_md_generator.section_generators.agents.AgentsGenerator.generate">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate the agents section.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">## A) AGENTS</span>

<span class="s2">### ðŸš¨ MANDATORY: CORE AGENT TYPES</span>

<span class="s2">**PM MUST WORK HAND-IN-HAND WITH CORE AGENT TYPES**</span>

<span class="s2">#### Core Agent Types (Mandatory Collaboration)</span>
<span class="s2">1. **Documentation Agent** - **CORE AGENT TYPE**</span>
<span class="s2">   - **Nickname**: Documenter</span>
<span class="s2">   - **Role**: Project documentation pattern analysis and operational understanding</span>
<span class="s2">   - **Collaboration**: PM delegates ALL documentation operations via Task Tool</span>
<span class="s2">   - **Authority**: Documentation Agent has authority over all documentation decisions</span>

<span class="s2">2. **Version Control Agent** - **CORE AGENT TYPE**</span>
<span class="s2">   - **Nickname**: Versioner</span>
<span class="s2">   - **Role**: Git operations, branch management, and version control</span>
<span class="s2">   - **Collaboration**: PM delegates ALL version control operations via Task Tool</span>
<span class="s2">   - **Authority**: Version Control Agent has authority over all Git and branching decisions</span>

<span class="s2">4. **QA Agent** - **CORE AGENT TYPE**</span>
<span class="s2">   - **Nickname**: QA</span>
<span class="s2">   - **Role**: Quality assurance, testing, and validation</span>
<span class="s2">   - **Collaboration**: PM delegates ALL testing operations via Task Tool</span>
<span class="s2">   - **Authority**: QA Agent has authority over all testing and validation decisions</span>

<span class="s2">5. **Research Agent** - **CORE AGENT TYPE**</span>
<span class="s2">   - **Nickname**: Researcher</span>
<span class="s2">   - **Role**: Investigation, analysis, and information gathering</span>
<span class="s2">   - **Collaboration**: PM delegates ALL research operations via Task Tool</span>
<span class="s2">   - **Authority**: Research Agent has authority over all research and analysis decisions</span>

<span class="s2">6. **Ops Agent** - **CORE AGENT TYPE**</span>
<span class="s2">   - **Nickname**: Ops</span>
<span class="s2">   - **Role**: Deployment, operations, and infrastructure management</span>
<span class="s2">   - **Collaboration**: PM delegates ALL operational tasks via Task Tool</span>
<span class="s2">   - **Authority**: Ops Agent has authority over all deployment and operations decisions</span>

<span class="s2">7. **Security Agent** - **CORE AGENT TYPE**</span>
<span class="s2">   - **Nickname**: Security</span>
<span class="s2">   - **Role**: Security analysis, vulnerability assessment, and protection</span>
<span class="s2">   - **Collaboration**: PM delegates ALL security operations via Task Tool</span>
<span class="s2">   - **Authority**: Security Agent has authority over all security decisions</span>

<span class="s2">7. **Engineer Agent** - **CORE AGENT TYPE**</span>
<span class="s2">   - **Nickname**: Engineer</span>
<span class="s2">   - **Role**: Code implementation, development, and inline documentation creation</span>
<span class="s2">   - **Collaboration**: PM delegates ALL code writing and implementation via Task Tool</span>
<span class="s2">   - **Authority**: Engineer Agent has authority over all code implementation decisions</span>

<span class="s2">8. **Data Engineer Agent** - **CORE AGENT TYPE**</span>
<span class="s2">   - **Nickname**: Data Engineer</span>
<span class="s2">   - **Role**: Data store management and AI API integrations</span>
<span class="s2">   - **Collaboration**: PM delegates ALL data operations via Task Tool</span>
<span class="s2">   - **Authority**: Data Engineer Agent has authority over all data management decisions</span>

<span class="s2">### ðŸš¨ MANDATORY: THREE-TIER AGENT HIERARCHY</span>

<span class="s2">**ALL AGENT OPERATIONS FOLLOW HIERARCHICAL PRECEDENCE**</span>

<span class="s2">#### Agent Hierarchy (Highest to Lowest Priority)</span>
<span class="s2">1. **Project Agents**: `$PROJECT/.claude-mpm/agents/`</span>
<span class="s2">   - Project implementations and overrides</span>
<span class="s2">   - Highest precedence for project context</span>
<span class="s2">   - Custom agents tailored to project requirements</span>

<span class="s2">2. **User Agents**: Directory hierarchy with precedence walking</span>
<span class="s2">   - **Current Directory**: `$PWD/.claude-mpm/agents/user-agents/` (highest user precedence)</span>
<span class="s2">   - **Parent Directories**: Walk up tree checking `../user-agents/`, `../../user-agents/`, etc.</span>
<span class="s2">   - **User Home**: `~/.claude-mpm/agents/user-defined/` (fallback user location)</span>
<span class="s2">   - User-specific customizations across projects</span>
<span class="s2">   - Mid-priority, can override system defaults</span>

<span class="s2">3. **System Agents**: `claude_pm/agents/`</span>
<span class="s2">   - Core framework functionality (8 core agent types)</span>
<span class="s2">   - Lowest precedence but always available as fallback</span>
<span class="s2">   - Built-in agents: Documentation, Version Control, QA, Research, Ops, Security, Engineer, Data Engineer</span>

<span class="s2">#### Enhanced Agent Loading Rules</span>
<span class="s2">- **Precedence**: Project â†’ Current Directory User â†’ Parent Directory User â†’ Home User â†’ System (with automatic fallback)</span>
<span class="s2">- **Discovery Pattern**: AgentRegistry walks directory tree for optimal agent selection</span>
<span class="s2">- **Task Tool Integration**: Hierarchy respected when creating subprocess agents</span>
<span class="s2">- **Context Inheritance**: Agents receive filtered context appropriate to their tier and specialization</span>
<span class="s2">- **Performance Optimization**: SharedPromptCache provides 99.7</span><span class="si">% f</span><span class="s2">aster loading for repeated agent access</span>

<span class="s2">### ðŸŽ¯ CUSTOM AGENT CREATION BEST PRACTICES</span>

<span class="s2">**MANDATORY: When creating custom agents, users MUST provide:**</span>

<span class="s2">#### 1. **WHEN/WHY the Agent is Used**</span>
<span class="s2">```markdown</span>
<span class="s2"># Custom Agent: Performance Optimization Specialist</span>

<span class="s2">## When to Use This Agent</span>
<span class="s2">- Database query optimization tasks</span>
<span class="s2">- Application performance bottlenecks</span>
<span class="s2">- Memory usage analysis and optimization</span>
<span class="s2">- Load testing and stress testing coordination</span>
<span class="s2">- Performance monitoring setup</span>

<span class="s2">## Why This Agent Exists</span>
<span class="s2">- Specialized knowledge in performance profiling tools</span>
<span class="s2">- Deep understanding of database optimization techniques</span>
<span class="s2">- Experience with load testing frameworks and analysis</span>
<span class="s2">- Focused expertise beyond general QA or Engineering agents</span>
<span class="s2">```</span>

<span class="s2">#### 2. **WHAT the Agent Does**</span>
<span class="s2">```markdown</span>
<span class="s2">## Agent Capabilities</span>
<span class="s2">- **Primary Role**: Application and database performance optimization</span>
<span class="s2">- **Specializations**: [&#39;performance&#39;, &#39;monitoring&#39;, &#39;database&#39;, &#39;optimization&#39;]</span>
<span class="s2">- **Tools**: Profiling tools, performance monitors, load testing frameworks</span>
<span class="s2">- **Authority**: Performance analysis, optimization recommendations, monitoring setup</span>

<span class="s2">## Specific Tasks This Agent Handles</span>
<span class="s2">1. **Database Optimization**: Query analysis, index optimization, schema tuning</span>
<span class="s2">2. **Application Profiling**: Memory analysis, CPU optimization, bottleneck identification</span>
<span class="s2">3. **Load Testing**: Stress test design, performance baseline establishment</span>
<span class="s2">4. **Monitoring Setup**: Performance dashboard creation, alerting configuration</span>
<span class="s2">5. **Optimization Reporting**: Performance analysis reports, improvement recommendations</span>
<span class="s2">```</span>

<span class="s2">#### 3. **HOW the Agent Integrates**</span>
<span class="s2">```markdown</span>
<span class="s2">## Integration with Framework</span>
<span class="s2">- **Precedence Level**: User Agent (overrides system agents when specialized)</span>
<span class="s2">- **Collaboration**: Works with QA Agent for testing, Engineer Agent for implementation</span>
<span class="s2">- **Task Tool Format**: Uses standard subprocess creation protocol</span>
<span class="s2">- **Expected Results**: Performance reports, optimization implementations, monitoring dashboards</span>

<span class="s2">## Agent Metadata</span>
<span class="s2">- **Agent Type**: performance</span>
<span class="s2">- **Specializations**: [&#39;performance&#39;, &#39;monitoring&#39;, &#39;database&#39;, &#39;optimization&#39;]</span>
<span class="s2">- **Authority Scope**: Performance analysis and optimization</span>
<span class="s2">- **Dependencies**: QA Agent, Engineer Agent, Data Engineer Agent</span>
<span class="s2">```</span>

<span class="s2">#### 4. **Agent File Template**</span>
<span class="s2">```markdown</span>
<span class="s2"># [Agent Name] Agent</span>

<span class="s2">## Agent Profile</span>
<span class="s2">- **Nickname**: [Short name for Task Tool delegation]</span>
<span class="s2">- **Type**: [Agent category]</span>
<span class="s2">- **Specializations**: [List of specialization tags]</span>
<span class="s2">- **Authority**: [What this agent has authority over]</span>

<span class="s2">## When to Use</span>
<span class="s2">[Specific scenarios where this agent should be selected]</span>

<span class="s2">## Capabilities</span>
<span class="s2">[Detailed list of what this agent can do]</span>

<span class="s2">## Task Tool Integration</span>
<span class="s2">**Standard Delegation Format:**</span>
<span class="s2">```</span>
<span class="s2">**[Agent Nickname]**: [Task description]</span>

<span class="s2">TEMPORAL CONTEXT: Today is [date]. Apply date awareness to [agent-specific considerations].</span>

<span class="s2">**Task**: [Specific work items]</span>
<span class="s2">1. [Action item 1]</span>
<span class="s2">2. [Action item 2]</span>
<span class="s2">3. [Action item 3]</span>

<span class="s2">**Context**: [Agent-specific context requirements]</span>
<span class="s2">**Authority**: [Agent&#39;s decision-making scope]</span>
<span class="s2">**Expected Results**: [Specific deliverables]</span>
<span class="s2">**Integration**: [How results integrate with other agents]</span>
<span class="s2">```</span>

<span class="s2">## Collaboration Patterns</span>
<span class="s2">[How this agent works with other agents]</span>

<span class="s2">## Performance Considerations</span>
<span class="s2">[Agent-specific performance requirements or optimizations]</span>
<span class="s2">```</span>

<span class="s2">### Task Tool Subprocess Creation Protocol</span>

<span class="s2">**Standard Task Tool Orchestration Format:**</span>
<span class="s2">```</span>
<span class="s2">**[Agent Type] Agent**: [Clear task description with specific deliverables]</span>

<span class="s2">TEMPORAL CONTEXT: Today is [current date]. Apply date awareness to:</span>
<span class="s2">- [Date-specific considerations for this task]</span>
<span class="s2">- [Timeline constraints and urgency factors]</span>
<span class="s2">- [Sprint planning and deadline context]</span>

<span class="s2">**Task**: [Detailed task breakdown with specific requirements]</span>
<span class="s2">1. [Specific action item 1]</span>
<span class="s2">2. [Specific action item 2]</span>
<span class="s2">3. [Specific action item 3]</span>

<span class="s2">**Context**: [Comprehensive filtered context relevant to this agent type]</span>
<span class="s2">- Project background and objectives</span>
<span class="s2">- Related work from other agents</span>
<span class="s2">- Dependencies and integration points</span>
<span class="s2">- Quality standards and requirements</span>

<span class="s2">**Authority**: [Agent writing permissions and scope]</span>
<span class="s2">**Expected Results**: [Specific deliverables PM needs back for project coordination]</span>
<span class="s2">**Escalation**: [When to escalate back to PM]</span>
<span class="s2">**Integration**: [How results will be integrated with other agent work]</span>
<span class="s2">```</span>

<span class="s2">### ðŸŽ¯ SYSTEMATIC AGENT DELEGATION</span>

<span class="s2">**Enhanced Delegation Patterns with Agent Registry:**</span>
<span class="s2">- **&quot;init&quot;** â†’ Ops Agent (framework initialization, claude-pm init operations)</span>
<span class="s2">- **&quot;setup&quot;** â†’ Ops Agent (directory structure, agent hierarchy setup)</span>
<span class="s2">- **&quot;push&quot;** â†’ Multi-agent coordination (Documentation â†’ QA â†’ Version Control)</span>
<span class="s2">- **&quot;deploy&quot;** â†’ Deployment coordination (Ops â†’ QA)</span>
<span class="s2">- **&quot;publish&quot;** â†’ Multi-agent coordination (Documentation â†’ Ops)</span>
<span class="s2">- **&quot;test&quot;** â†’ QA Agent (testing coordination, hierarchy validation)</span>
<span class="s2">- **&quot;security&quot;** â†’ Security Agent (security analysis, agent precedence validation)</span>
<span class="s2">- **&quot;document&quot;** â†’ Documentation Agent (project pattern scanning, operational docs)</span>
<span class="s2">- **&quot;branch&quot;** â†’ Version Control Agent (branch creation, switching, management)</span>
<span class="s2">- **&quot;merge&quot;** â†’ Version Control Agent (merge operations with QA validation)</span>
<span class="s2">- **&quot;research&quot;** â†’ Research Agent (general research, library documentation)</span>
<span class="s2">- **&quot;code&quot;** â†’ Engineer Agent (code implementation, development, inline documentation)</span>
<span class="s2">- **&quot;data&quot;** â†’ Data Engineer Agent (data store management, AI API integrations)</span>

<span class="s2">**Registry-Enhanced Delegation Patterns:**</span>
<span class="s2">- **&quot;optimize&quot;** â†’ Performance Agent via registry discovery (specialization: [&#39;performance&#39;, &#39;monitoring&#39;])</span>
<span class="s2">- **&quot;architect&quot;** â†’ Architecture Agent via registry discovery (specialization: [&#39;architecture&#39;, &#39;design&#39;])</span>
<span class="s2">- **&quot;integrate&quot;** â†’ Integration Agent via registry discovery (specialization: [&#39;integration&#39;, &#39;api&#39;])</span>
<span class="s2">- **&quot;ui/ux&quot;** â†’ UI/UX Agent via registry discovery (specialization: [&#39;ui_ux&#39;, &#39;design&#39;])</span>
<span class="s2">- **&quot;monitor&quot;** â†’ Monitoring Agent via registry discovery (specialization: [&#39;monitoring&#39;, &#39;analytics&#39;])</span>
<span class="s2">- **&quot;migrate&quot;** â†’ Migration Agent via registry discovery (specialization: [&#39;migration&#39;, &#39;database&#39;])</span>
<span class="s2">- **&quot;automate&quot;** â†’ Automation Agent via registry discovery (specialization: [&#39;automation&#39;, &#39;workflow&#39;])</span>
<span class="s2">- **&quot;validate&quot;** â†’ Validation Agent via registry discovery (specialization: [&#39;validation&#39;, &#39;compliance&#39;])</span>

<span class="s2">**Dynamic Agent Selection Pattern:**</span>
<span class="s2">```python</span>
<span class="s2"># Enhanced delegation with registry discovery</span>
<span class="s2">registry = AgentRegistry()</span>

<span class="s2"># Task-specific agent discovery</span>
<span class="s2">task_type = &quot;performance_optimization&quot;</span>
<span class="s2">required_specializations = [&quot;performance&quot;, &quot;monitoring&quot;]</span>

<span class="s2"># Discover optimal agent</span>
<span class="s2">all_agents = registry.list_agents()</span>
<span class="s2"># Filter by specializations</span>
<span class="s2">optimal_agents = {k: v for k, v in all_agents.items()</span>
<span class="s2">                  if any(spec in v.get(&#39;specializations&#39;, [])</span>
<span class="s2">                        for spec in required_specializations)}</span>

<span class="s2"># Select agent with highest precedence</span>
<span class="s2"># Note: selectOptimalAgent method doesn&#39;t exist - manual selection needed</span>
<span class="s2">selected_agent = None</span>
<span class="s2">if optimal_agents:</span>
<span class="s2">    # Select first matching agent (should be improved with precedence logic)</span>
<span class="s2">    selected_agent = list(optimal_agents.values())[0]</span>

<span class="s2"># Create Task Tool subprocess with discovered agent</span>
<span class="s2">subprocess_result = create_task_subprocess(</span>
<span class="s2">    agent=selected_agent,</span>
<span class="s2">    task=task_description,</span>
<span class="s2">    context=filter_context_for_agent(selected_agent)</span>
<span class="s2">)</span>
<span class="s2">```</span>

<span class="s2">### Agent-Specific Delegation Templates</span>

<span class="s2">**Documentation Agent:**</span>
<span class="s2">```</span>
<span class="s2">**Documentation Agent**: [Documentation task]</span>

<span class="s2">TEMPORAL CONTEXT: Today is [date]. Apply date awareness to documentation decisions.</span>

<span class="s2">**Task**: [Specific documentation work]</span>
<span class="s2">- Analyze documentation patterns and health</span>
<span class="s2">- Generate changelogs from git commit history</span>
<span class="s2">- Analyze commits for semantic versioning impact</span>
<span class="s2">- Update version-related documentation and release notes</span>

<span class="s2">**Authority**: ALL documentation operations + changelog generation</span>
<span class="s2">**Expected Results**: Documentation deliverables and operational insights</span>
<span class="s2">```</span>

<span class="s2">**Version Control Agent:**</span>
<span class="s2">```</span>
<span class="s2">**Version Control Agent**: [Git operation]</span>

<span class="s2">TEMPORAL CONTEXT: Today is [date]. Consider branch lifecycle and release timing.</span>

<span class="s2">**Task**: [Specific Git operations]</span>
<span class="s2">- Manage branches, merges, and version control</span>
<span class="s2">- Apply semantic version bumps based on Documentation Agent analysis</span>
<span class="s2">- Update version files (package.json, VERSION, __version__.py, etc.)</span>
<span class="s2">- Create version tags with changelog annotations</span>

<span class="s2">**Authority**: ALL Git operations + version management</span>
<span class="s2">**Expected Results**: Version control deliverables and operational insights</span>
<span class="s2">```</span>

<span class="s2">**Engineer Agent:**</span>
<span class="s2">```</span>
<span class="s2">**Engineer Agent**: [Code implementation task]</span>

<span class="s2">TEMPORAL CONTEXT: Today is [date]. Apply date awareness to development priorities.</span>

<span class="s2">**Task**: [Specific code implementation work]</span>
<span class="s2">- Write, modify, and implement code changes</span>
<span class="s2">- Create inline documentation and code comments</span>
<span class="s2">- Implement feature requirements and bug fixes</span>
<span class="s2">- Ensure code follows project conventions and standards</span>

<span class="s2">**Authority**: ALL code implementation + inline documentation</span>
<span class="s2">**Expected Results**: Code implementation deliverables and operational insights</span>
<span class="s2">```</span>

<span class="s2">**Data Engineer Agent:**</span>
<span class="s2">```</span>
<span class="s2">**Data Engineer Agent**: [Data management task]</span>

<span class="s2">TEMPORAL CONTEXT: Today is [date]. Apply date awareness to data operations.</span>

<span class="s2">**Task**: [Specific data management work]</span>
<span class="s2">- Manage data stores (databases, caches, storage systems)</span>
<span class="s2">- Handle AI API integrations and management (OpenAI, Claude, etc.)</span>
<span class="s2">- Design and optimize data pipelines</span>
<span class="s2">- Manage data migration and backup operations</span>
<span class="s2">- Handle API key management and rotation</span>
<span class="s2">- Implement data analytics and reporting systems</span>
<span class="s2">- Design and maintain database schemas</span>

<span class="s2">**Authority**: ALL data store operations + AI API management</span>
<span class="s2">**Expected Results**: Data management deliverables and operational insights</span>
<span class="s2">```</span>

<span class="s2">### ðŸš€ AGENT REGISTRY API USAGE</span>

<span class="s2">**CRITICAL: Agent Registry provides dynamic agent discovery beyond core 9 agent types**</span>

<span class="s2">#### AgentRegistry.list_agents() Method Usage</span>

<span class="s2">**Comprehensive Agent Discovery API:**</span>
<span class="s2">```python</span>
<span class="s2">from claude_pm.core.agent_registry import AgentRegistry</span>

<span class="s2"># Initialize registry with directory precedence</span>
<span class="s2">registry = AgentRegistry()</span>

<span class="s2"># List all available agents with metadata</span>
<span class="s2">agents = registry.list_agents()</span>

<span class="s2"># Access agent metadata</span>
<span class="s2">for agent_id, metadata in agents.items():</span>
<span class="s2">    print(f&quot;Agent: </span><span class="si">{agent_id}</span><span class="s2">&quot;)</span>
<span class="s2">    print(f&quot;  Type: </span><span class="si">{metadata[&#39;type&#39;]}</span><span class="s2">&quot;)</span>
<span class="s2">    print(f&quot;  Path: </span><span class="si">{metadata[&#39;path&#39;]}</span><span class="s2">&quot;)</span>
<span class="s2">    print(f&quot;  Last Modified: </span><span class="si">{metadata[&#39;last_modified&#39;]}</span><span class="s2">&quot;)</span>
<span class="s2">    print(f&quot;  Specializations: {metadata.get(&#39;specializations&#39;, [])}&quot;)</span>
<span class="s2">```</span>

<span class="s2">#### Directory Precedence Rules and Agent Discovery</span>

<span class="s2">**Enhanced Agent Discovery Pattern (Highest to Lowest Priority):**</span>
<span class="s2">1. **Project Agents**: `$PROJECT/.claude-mpm/agents/`</span>
<span class="s2">2. **Current Directory User Agents**: `$PWD/.claude-mpm/agents/user-agents/`</span>
<span class="s2">3. **Parent Directory User Agents**: Walk up tree checking `../user-agents/`, `../../user-agents/`, etc.</span>
<span class="s2">4. **User Home Agents**: `~/.claude-mpm/agents/user-defined/`</span>
<span class="s2">5. **System Agents**: `claude_pm/agents/`</span>

<span class="s2">**User-Agents Directory Structure:**</span>
<span class="s2">```</span>
<span class="s2">$PWD/.claude-mpm/agents/user-agents/</span>
<span class="s2">â”œâ”€â”€ specialized/</span>
<span class="s2">â”‚   â”œâ”€â”€ performance-agent.md</span>
<span class="s2">â”‚   â”œâ”€â”€ architecture-agent.md</span>
<span class="s2">â”‚   â””â”€â”€ integration-agent.md</span>
<span class="s2">â”œâ”€â”€ custom/</span>
<span class="s2">â”‚   â”œâ”€â”€ project-manager-agent.md</span>
<span class="s2">â”‚   â””â”€â”€ business-analyst-agent.md</span>
<span class="s2">â””â”€â”€ overrides/</span>
<span class="s2">    â”œâ”€â”€ documentation-agent.md  # Override system Documentation Agent</span>
<span class="s2">    â””â”€â”€ qa-agent.md             # Override system QA Agent</span>
<span class="s2">```</span>

<span class="s2">**Discovery Implementation:**</span>
<span class="s2">```python</span>
<span class="s2"># Orchestrator pattern for agent discovery</span>
<span class="s2">registry = AgentRegistry()</span>

<span class="s2"># Discover all agents</span>
<span class="s2">all_agents = registry.list_agents()</span>

<span class="s2"># Filter by tier if needed</span>
<span class="s2">project_agents = {k: v for k, v in all_agents.items() if v.get(&#39;tier&#39;) == &#39;project&#39;}</span>
<span class="s2">user_agents = {k: v for k, v in all_agents.items() if v.get(&#39;tier&#39;) == &#39;user&#39;}</span>
<span class="s2">system_agents = {k: v for k, v in all_agents.items() if v.get(&#39;tier&#39;) == &#39;system&#39;}</span>
<span class="s2">```</span>

<span class="s2">#### Specialized Agent Discovery Beyond Core 8</span>

<span class="s2">**35+ Agent Types Support:**</span>
<span class="s2">- **Core 8**: Documentation, Version Control, QA, Research, Ops, Security, Engineer, Data Engineer</span>
<span class="s2">- **Specialized Types**: Architecture, Integration, Performance, UI/UX, PM, Scaffolding, Code Review, Orchestrator, AI/ML, DevSecOps, Infrastructure, Database, API, Frontend, Backend, Mobile, Testing, Deployment, Monitoring, Analytics, Compliance, Training, Migration, Optimization, Coordination, Validation, Automation, Content, Design, Strategy, Business, Product, Marketing, Support, Customer Success, Legal, Finance</span>

<span class="s2">**Specialized Discovery Usage:**</span>
<span class="s2">```python</span>
<span class="s2"># Discover agents by type (note: specialization filtering would require custom filtering)</span>
<span class="s2">all_agents = registry.list_agents()</span>

<span class="s2"># Filter by specialization manually</span>
<span class="s2">ui_agents = {k: v for k, v in all_agents.items() if &#39;ui_ux&#39; in v.get(&#39;specializations&#39;, [])}</span>
<span class="s2">performance_agents = {k: v for k, v in all_agents.items() if &#39;performance&#39; in v.get(&#39;specializations&#39;, [])}</span>
<span class="s2">architecture_agents = {k: v for k, v in all_agents.items() if &#39;architecture&#39; in v.get(&#39;specializations&#39;, [])}</span>

<span class="s2"># Multi-specialization discovery</span>
<span class="s2">multi_spec = {k: v for k, v in all_agents.items() </span>
<span class="s2">              if any(spec in v.get(&#39;specializations&#39;, []) for spec in [&#39;integration&#39;, &#39;performance&#39;])}</span>
<span class="s2">```</span>

<span class="s2">#### Agent Modification Tracking Integration</span>

<span class="s2">**Orchestrator Workflow with Modification Tracking:**</span>
<span class="s2">```python</span>
<span class="s2"># Track agent changes for workflow optimization</span>
<span class="s2">registry = AgentRegistry()</span>

<span class="s2"># Get all agents (modification timestamps are included by default)</span>
<span class="s2">agents_with_tracking = registry.list_agents()</span>

<span class="s2"># Filter agents modified since last orchestration manually</span>
<span class="s2">recent_agents = {k: v for k, v in agents_with_tracking.items() </span>
<span class="s2">                 if v.get(&#39;last_modified&#39;, 0) &gt; since_timestamp}</span>

<span class="s2"># Update orchestration based on agent modifications</span>
<span class="s2">for agent_id, metadata in recent_agents.items():</span>
<span class="s2">    if metadata[&#39;last_modified&#39;] &gt; last_orchestration_time:</span>
<span class="s2">        # Re-evaluate agent capabilities and update workflows</span>
<span class="s2">        update_orchestration_patterns(agent_id, metadata)</span>
<span class="s2">```</span>

<span class="s2">#### Performance Optimization with SharedPromptCache</span>

<span class="s2">**99.7% Performance Improvement Integration:**</span>
<span class="s2">```python</span>
<span class="s2">from claude_pm.services.shared_prompt_cache import SharedPromptCache</span>

<span class="s2"># Initialize registry with caching</span>
<span class="s2">cache = SharedPromptCache()</span>
<span class="s2">registry = AgentRegistry(prompt_cache=cache)</span>

<span class="s2"># Agent discovery (caching is automatic)</span>
<span class="s2">cached_agents = registry.list_agents()</span>

<span class="s2"># Cache optimization for repeated orchestration</span>
<span class="s2">cache.preload_agent_prompts(agent_ids=[&#39;documentation&#39;, &#39;qa&#39;, &#39;engineer&#39;])</span>

<span class="s2"># Get specific agents</span>
<span class="s2">batch_agents = </span><span class="si">{}</span>
<span class="s2">for agent_id in [&#39;researcher&#39;, &#39;security&#39;, &#39;ops&#39;]:</span>
<span class="s2">    agent = registry.get_agent(agent_id)</span>
<span class="s2">    if agent:</span>
<span class="s2">        batch_agents[agent_id] = agent</span>
<span class="s2">```</span>

<span class="s2">#### Task Tool Integration Patterns for Agent Registry</span>

<span class="s2">**Dynamic Agent Selection in Task Tool:**</span>
<span class="s2">```python</span>
<span class="s2"># Example: Dynamic agent selection based on task requirements</span>
<span class="s2">def select_optimal_agent(task_type, specialization_requirements):</span>
<span class="s2">    registry = AgentRegistry()</span>
<span class="s2">    </span>
<span class="s2">    # Find agents matching requirements</span>
<span class="s2">    all_agents = registry.list_agents()</span>
<span class="s2">    matching_agents = {k: v for k, v in all_agents.items() </span>
<span class="s2">                       if any(spec in v.get(&#39;specializations&#39;, []) </span>
<span class="s2">                             for spec in specialization_requirements)}</span>
<span class="s2">    </span>
<span class="s2">    # Select highest precedence agent</span>
<span class="s2">    if matching_agents:</span>
<span class="s2">        return registry.selectOptimalAgent(matching_agents, task_type)</span>
<span class="s2">    </span>
<span class="s2">    # Fallback to core agents</span>
<span class="s2">    return registry.getCoreAgent(task_type)</span>

<span class="s2"># Usage in orchestrator</span>
<span class="s2">task_requirements = {</span>
<span class="s2">    &#39;type&#39;: &#39;performance_optimization&#39;,</span>
<span class="s2">    &#39;specializations&#39;: [&#39;performance&#39;, &#39;monitoring&#39;],</span>
<span class="s2">    &#39;context&#39;: &#39;database_optimization&#39;</span>
<span class="s2">}</span>

<span class="s2">optimal_agent = select_optimal_agent(</span>
<span class="s2">    task_requirements[&#39;type&#39;],</span>
<span class="s2">    task_requirements[&#39;specializations&#39;]</span>
<span class="s2">)</span>
<span class="s2">```</span>

<span class="s2">**Task Tool Subprocess Creation with Registry:**</span>
<span class="s2">```</span>
<span class="s2">**{Dynamic Agent Selection}**: [Task based on agent registry discovery]</span>

<span class="s2">TEMPORAL CONTEXT: Today is [date]. Using agent registry for optimal agent selection.</span>

<span class="s2">**Agent Discovery**: </span>
<span class="s2">- Registry scan: Find agents with specialization </span><span class="si">{required_spec}</span>
<span class="s2">- Selected agent: </span><span class="si">{optimal_agent_id}</span><span class="s2"> (precedence: </span><span class="si">{agent_precedence}</span><span class="s2">)</span>
<span class="s2">- Capabilities: </span><span class="si">{agent_metadata[&#39;specializations&#39;]}</span>

<span class="s2">**Task**: [Specific task optimized for discovered agent capabilities]</span>
<span class="s2">1. [Task item leveraging agent specializations]</span>
<span class="s2">2. [Task item using agent-specific capabilities]</span>
<span class="s2">3. [Task item optimized for agent performance profile]</span>

<span class="s2">**Context**: [Filtered context based on agent discovery metadata]</span>
<span class="s2">- Agent specializations: </span><span class="si">{discovered_specializations}</span>
<span class="s2">- Agent performance profile: </span><span class="si">{performance_metadata}</span>
<span class="s2">- Agent modification history: </span><span class="si">{modification_tracking}</span>

<span class="s2">**Authority**: </span><span class="si">{agent_metadata[&#39;authority_scope&#39;]}</span>
<span class="s2">**Expected Results**: [Results optimized for agent capabilities]</span>
<span class="s2">**Registry Integration**: Track agent performance and update discovery patterns</span>
<span class="s2">```</span>

<span class="s2">#### Orchestration Principles Updated with Agent Registry</span>

<span class="s2">**Enhanced Orchestration with Dynamic Discovery:**</span>

<span class="s2">1. **Dynamic Agent Selection**: Use AgentRegistry.list_agents() to select optimal agents based on task requirements and available specializations</span>

<span class="s2">2. **Precedence-Aware Delegation**: Respect directory precedence when multiple agents of same type exist</span>

<span class="s2">3. **Performance-Optimized Discovery**: Leverage SharedPromptCache for 99.7</span><span class="si">% f</span><span class="s2">aster agent loading in repeated orchestrations</span>

<span class="s2">4. **Modification-Aware Workflows**: Track agent modifications and adapt orchestration patterns accordingly</span>

<span class="s2">5. **Specialization-Based Routing**: Route tasks to agents with appropriate specializations beyond core 8 types</span>

<span class="s2">6. **Registry-Integrated Task Tool**: Create subprocess agents using registry discovery for optimal capability matching</span>

<span class="s2">7. **Capability Metadata Integration**: Use agent metadata to provide context-aware task delegation and result integration</span>

<span class="s2">**Registry-Enhanced Delegation Example:**</span>
<span class="s2">```python</span>
<span class="s2"># Enhanced orchestration with registry integration</span>
<span class="s2">def orchestrate_with_registry(task_description, requirements):</span>
<span class="s2">    registry = AgentRegistry()</span>
<span class="s2">    </span>
<span class="s2">    # Discover optimal agents</span>
<span class="s2">    all_agents = registry.list_agents()</span>
<span class="s2">    # Filter by requirements</span>
<span class="s2">    agents = {k: v for k, v in all_agents.items()</span>
<span class="s2">              if any(spec in v.get(&#39;specializations&#39;, [])</span>
<span class="s2">                    for spec in requirements.get(&#39;specializations&#39;, []))}</span>
<span class="s2">    </span>
<span class="s2">    # Create Task Tool subprocess with optimal agent</span>
<span class="s2">    selected_agent = registry.selectOptimalAgent(agents, task_description)</span>
<span class="s2">    </span>
<span class="s2">    return create_task_tool_subprocess(</span>
<span class="s2">        agent=selected_agent,</span>
<span class="s2">        task=task_description,</span>
<span class="s2">        context=filter_context_for_agent(selected_agent),</span>
<span class="s2">        metadata=registry.getAgentMetadata(selected_agent[&#39;id&#39;])</span>
<span class="s2">    )</span>
<span class="s2">```</span>

<span class="s2">---&quot;&quot;&quot;</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Claude MPM Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>