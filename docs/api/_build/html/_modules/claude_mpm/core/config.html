

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>claude_mpm.core.config &mdash; Claude MPM API Reference 3.8.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=dbb19ff3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=dbb19ff3" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=070f1fcc"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Claude MPM API Reference
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Core API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../core/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../services/index.html">Services API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agents/index.html">Agents API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hooks/index.html">Hooks API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli/index.html">CLI API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">claude_mpm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../search.html">Search Page</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Claude MPM API Reference</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">claude_mpm.core.config</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for claude_mpm.core.config</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Configuration management for Claude PM Framework.</span>

<span class="sd">Handles loading configuration from files, environment variables,</span>
<span class="sd">and default values with proper validation and type conversion.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">yaml</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">..utils.config_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConfigurationManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.config_paths</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConfigPaths</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConfigurationError</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="Config">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration manager for Claude PM services.</span>

<span class="sd">    Supports loading from:</span>
<span class="sd">    - Python dictionaries</span>
<span class="sd">    - JSON files</span>
<span class="sd">    - YAML files</span>
<span class="sd">    - Environment variables</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Config.__init__">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">config_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">env_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CLAUDE_PM_&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: Base configuration dictionary</span>
<span class="sd">            config_file: Path to configuration file (JSON or YAML)</span>
<span class="sd">            env_prefix: Prefix for environment variables</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_env_prefix</span> <span class="o">=</span> <span class="n">env_prefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config_mgr</span> <span class="o">=</span> <span class="n">ConfigurationManager</span><span class="p">(</span><span class="n">cache_enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Load base configuration</span>
        <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

        <span class="c1"># Track where configuration was loaded from</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_from</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="c1"># Load from file if provided</span>
        <span class="k">if</span> <span class="n">config_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_from</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Try to load from standard location: .claude-mpm/configuration.yaml</span>
            <span class="n">default_config</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.claude-mpm&quot;</span> <span class="o">/</span> <span class="s2">&quot;configuration.yaml&quot;</span>
            <span class="k">if</span> <span class="n">default_config</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">default_config</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_from</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">default_config</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Also try .yml extension</span>
                <span class="n">alt_config</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.claude-mpm&quot;</span> <span class="o">/</span> <span class="s2">&quot;configuration.yml&quot;</span>
                <span class="k">if</span> <span class="n">alt_config</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">alt_config</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_from</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">alt_config</span><span class="p">)</span>

        <span class="c1"># Load from environment variables (new and legacy prefixes)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load_env_vars</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load_legacy_env_vars</span><span class="p">()</span>

        <span class="c1"># Apply defaults</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_defaults</span><span class="p">()</span></div>


<div class="viewcode-block" id="Config.load_file">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.load_file">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load configuration from file with enhanced error handling.</span>
<span class="sd">        </span>
<span class="sd">        WHY: Configuration loading failures can cause silent issues. We need</span>
<span class="sd">        to provide clear, actionable error messages to help users fix problems.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration file not found: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TIP: Create a configuration file with: mkdir -p </span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">parent</span><span class="si">}</span><span class="s2"> &amp;&amp; touch </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Check if file is readable</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">R_OK</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration file is not readable: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TIP: Fix permissions with: chmod 644 </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span>
                
            <span class="c1"># Check file size (warn if too large)</span>
            <span class="n">file_size</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
            <span class="k">if</span> <span class="n">file_size</span> <span class="o">&gt;</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">:</span>  <span class="c1"># 1MB</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration file is large (</span><span class="si">{</span><span class="n">file_size</span><span class="si">}</span><span class="s2"> bytes): </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
            <span class="c1"># Try to load the configuration</span>
            <span class="n">file_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_mgr</span><span class="o">.</span><span class="n">load_auto</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">file_config</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_mgr</span><span class="o">.</span><span class="n">merge_configs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="n">file_config</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ Successfully loaded configuration from </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
                <span class="c1"># Log important configuration values for debugging</span>
                <span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
                    <span class="n">response_logging</span> <span class="o">=</span> <span class="n">file_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;response_logging&#39;</span><span class="p">,</span> <span class="p">{})</span>
                    <span class="k">if</span> <span class="n">response_logging</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response logging enabled: </span><span class="si">{</span><span class="n">response_logging</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;enabled&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">False</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response logging format: </span><span class="si">{</span><span class="n">response_logging</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;json&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;YAML syntax error in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;problem_mark&#39;</span><span class="p">):</span>
                <span class="n">mark</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">problem_mark</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error at line </span><span class="si">{</span><span class="n">mark</span><span class="o">.</span><span class="n">line</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">, column </span><span class="si">{</span><span class="n">mark</span><span class="o">.</span><span class="n">column</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TIP: Validate your YAML at https://www.yamllint.com/ or run: python scripts/validate_configuration.py&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TIP: Common issue - YAML requires spaces, not tabs. Fix with: sed -i &#39;&#39; &#39;s/</span><span class="se">\t</span><span class="s2">/    /g&#39; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
            <span class="c1"># Store error for later retrieval</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s1">&#39;_load_error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            
        <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JSON syntax error in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error at line </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">lineno</span><span class="si">}</span><span class="s2">, column </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">colno</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TIP: Validate your JSON at https://jsonlint.com/&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s1">&#39;_load_error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load configuration from </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TIP: Check file permissions and format (YAML/JSON)&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TIP: Run validation with: python scripts/validate_configuration.py&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s1">&#39;_load_error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_load_env_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load configuration from environment variables.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_env_prefix</span><span class="p">):</span>
                <span class="n">config_key</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_env_prefix</span><span class="p">)</span> <span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

                <span class="c1"># Convert environment variable value to appropriate type</span>
                <span class="n">converted_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_env_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">config_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">converted_value</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded env var: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">config_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_load_legacy_env_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load configuration from legacy CLAUDE_PM_ environment variables for backward compatibility.&quot;&quot;&quot;</span>
        <span class="n">legacy_prefix</span> <span class="o">=</span> <span class="s2">&quot;CLAUDE_PM_&quot;</span>
        <span class="n">loaded_legacy_vars</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">legacy_prefix</span><span class="p">):</span>
                <span class="n">config_key</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">legacy_prefix</span><span class="p">)</span> <span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

                <span class="c1"># Only load if not already set by new environment variables</span>
                <span class="k">if</span> <span class="n">config_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
                    <span class="n">converted_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_env_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">config_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">converted_value</span>
                    <span class="n">loaded_legacy_vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded legacy env var: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">config_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Warn about legacy variables in use</span>
        <span class="k">if</span> <span class="n">loaded_legacy_vars</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Using legacy CLAUDE_PM_ environment variables: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">loaded_legacy_vars</span><span class="p">)</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="s2">&quot;Please migrate to CLAUDE_MULTIAGENT_PM_ prefix for future compatibility.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_env_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert environment variable string to appropriate type.&quot;&quot;&quot;</span>
        <span class="c1"># Boolean conversion</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;on&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;false&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Numeric conversion</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1"># Return as string</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_apply_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply default configuration values.&quot;&quot;&quot;</span>
        <span class="c1"># Get CLAUDE_MULTIAGENT_PM_ROOT (new) or CLAUDE_PM_ROOT (backward compatibility)</span>
        <span class="n">claude_multiagent_pm_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CLAUDE_MULTIAGENT_PM_ROOT&quot;</span><span class="p">)</span>
        <span class="n">claude_pm_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CLAUDE_PM_ROOT&quot;</span><span class="p">)</span>  <span class="c1"># Backward compatibility</span>

        <span class="c1"># Prioritize new variable name, fall back to old for compatibility</span>
        <span class="n">project_root</span> <span class="o">=</span> <span class="n">claude_multiagent_pm_root</span> <span class="ow">or</span> <span class="n">claude_pm_root</span>

        <span class="k">if</span> <span class="n">project_root</span><span class="p">:</span>
            <span class="c1"># Use custom root directory</span>
            <span class="n">claude_pm_path</span> <span class="o">=</span> <span class="n">project_root</span>
            <span class="n">base_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">project_root</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
            <span class="n">managed_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">project_root</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;managed&quot;</span><span class="p">)</span>

            <span class="c1"># Log which environment variable was used</span>
            <span class="k">if</span> <span class="n">claude_multiagent_pm_root</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using CLAUDE_MULTIAGENT_PM_ROOT environment variable&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Using deprecated CLAUDE_PM_ROOT environment variable. Please migrate to CLAUDE_MULTIAGENT_PM_ROOT&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Use default paths</span>
            <span class="n">base_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;Projects&quot;</span><span class="p">)</span>
            <span class="n">claude_pm_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;Projects&quot;</span> <span class="o">/</span> <span class="s2">&quot;claude-pm&quot;</span><span class="p">)</span>
            <span class="n">managed_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;Projects&quot;</span> <span class="o">/</span> <span class="s2">&quot;managed&quot;</span><span class="p">)</span>

        <span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># Logging</span>
            <span class="s2">&quot;log_level&quot;</span><span class="p">:</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
            <span class="s2">&quot;log_format&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> - </span><span class="si">%(name)s</span><span class="s2"> - </span><span class="si">%(levelname)s</span><span class="s2"> - </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="c1"># Health monitoring</span>
            <span class="s2">&quot;enable_health_monitoring&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;health_check_interval&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s2">&quot;health_history_size&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="s2">&quot;health_aggregation_window&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
            <span class="c1"># Metrics</span>
            <span class="s2">&quot;enable_metrics&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;metrics_interval&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
            <span class="c1"># Advanced health monitoring thresholds</span>
            <span class="s2">&quot;health_thresholds&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;cpu_percent&quot;</span><span class="p">:</span> <span class="mf">80.0</span><span class="p">,</span>
                <span class="s2">&quot;memory_mb&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                <span class="s2">&quot;file_descriptors&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s2">&quot;max_clients&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s2">&quot;max_error_rate&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
                <span class="s2">&quot;network_timeout&quot;</span><span class="p">:</span> <span class="mf">2.0</span>
            <span class="p">},</span>
            <span class="c1"># Automatic recovery configuration</span>
            <span class="s2">&quot;recovery&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;check_interval&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                <span class="s2">&quot;max_recovery_attempts&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s2">&quot;recovery_timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                <span class="s2">&quot;circuit_breaker&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;failure_threshold&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="s2">&quot;timeout_seconds&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
                    <span class="s2">&quot;success_threshold&quot;</span><span class="p">:</span> <span class="mi">3</span>
                <span class="p">},</span>
                <span class="s2">&quot;strategy&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;warning_threshold&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="s2">&quot;critical_threshold&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;failure_window_seconds&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
                    <span class="s2">&quot;min_recovery_interval&quot;</span><span class="p">:</span> <span class="mi">60</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="c1"># Service management</span>
            <span class="s2">&quot;graceful_shutdown_timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s2">&quot;startup_timeout&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
            <span class="c1"># ai-trackdown-tools integration</span>
            <span class="s2">&quot;use_ai_trackdown_tools&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;ai_trackdown_tools_timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s2">&quot;ai_trackdown_tools_fallback_logging&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="c1"># Claude PM specific - dynamic path resolution</span>
            <span class="s2">&quot;base_path&quot;</span><span class="p">:</span> <span class="n">base_path</span><span class="p">,</span>
            <span class="s2">&quot;claude_pm_path&quot;</span><span class="p">:</span> <span class="n">claude_pm_path</span><span class="p">,</span>
            <span class="s2">&quot;managed_path&quot;</span><span class="p">:</span> <span class="n">managed_path</span><span class="p">,</span>
            <span class="c1"># Alerting</span>
            <span class="s2">&quot;enable_alerting&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;alert_threshold&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
            <span class="c1"># Development</span>
            <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="c1"># Task and issue tracking</span>
            <span class="s2">&quot;enable_persistent_tracking&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;fallback_tracking_method&quot;</span><span class="p">:</span> <span class="s2">&quot;logging&quot;</span><span class="p">,</span>  <span class="c1"># Options: &quot;logging&quot;, &quot;file&quot;, &quot;disabled&quot;</span>
            <span class="c1"># Evaluation system - Phase 2 Mirascope integration</span>
            <span class="s2">&quot;enable_evaluation&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_storage_path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ConfigPaths</span><span class="o">.</span><span class="n">get_user_config_dir</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;training&quot;</span><span class="p">),</span>
            <span class="s2">&quot;correction_capture_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;correction_storage_rotation_days&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_logging_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;auto_prompt_improvement&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># Disabled by default for Phase 1</span>
            <span class="c1"># Mirascope evaluation settings</span>
            <span class="s2">&quot;evaluation_provider&quot;</span><span class="p">:</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>  <span class="c1"># auto, openai, anthropic</span>
            <span class="s2">&quot;evaluation_criteria&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;correctness&quot;</span><span class="p">,</span> <span class="s2">&quot;relevance&quot;</span><span class="p">,</span> <span class="s2">&quot;completeness&quot;</span><span class="p">,</span> <span class="s2">&quot;clarity&quot;</span><span class="p">,</span> <span class="s2">&quot;helpfulness&quot;</span><span class="p">],</span>
            <span class="s2">&quot;evaluation_caching_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_cache_ttl_hours&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_cache_max_size&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_cache_memory_limit_mb&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_cache_strategy&quot;</span><span class="p">:</span> <span class="s2">&quot;hybrid&quot;</span><span class="p">,</span>  <span class="c1"># lru, ttl, hybrid</span>
            <span class="s2">&quot;evaluation_async_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_batch_size&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_max_concurrent&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_timeout_seconds&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_model_config&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="c1"># Integration settings</span>
            <span class="s2">&quot;auto_evaluate_corrections&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;auto_evaluate_responses&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;batch_evaluation_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;batch_evaluation_interval_minutes&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="c1"># Performance optimization</span>
            <span class="s2">&quot;evaluation_performance_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_batch_wait_ms&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_max_concurrent_batches&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_circuit_breaker_threshold&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_circuit_breaker_timeout&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_circuit_breaker_success_threshold&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="c1"># Metrics and monitoring</span>
            <span class="s2">&quot;enable_evaluation_metrics&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;evaluation_monitoring_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="c1"># Additional configuration</span>
            <span class="s2">&quot;correction_max_file_size_mb&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;correction_backup_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;correction_compression_enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="c1"># Agent Memory System configuration</span>
            <span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>                    <span class="c1"># Master switch for memory system</span>
                <span class="s2">&quot;auto_learning&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>              <span class="c1"># Automatic learning extraction (changed default to True)</span>
                <span class="s2">&quot;limits&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;default_size_kb&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>           <span class="c1"># Default file size limit</span>
                    <span class="s2">&quot;max_sections&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>             <span class="c1"># Maximum sections per file</span>
                    <span class="s2">&quot;max_items_per_section&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>    <span class="c1"># Maximum items per section</span>
                    <span class="s2">&quot;max_line_length&quot;</span><span class="p">:</span> <span class="mi">120</span>          <span class="c1"># Maximum line length</span>
                <span class="p">},</span>
                <span class="s2">&quot;agent_overrides&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;research&quot;</span><span class="p">:</span> <span class="p">{</span>                   <span class="c1"># Research agent override</span>
                        <span class="s2">&quot;size_kb&quot;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>              <span class="c1"># Can have larger memory</span>
                        <span class="s2">&quot;auto_learning&quot;</span><span class="p">:</span> <span class="kc">True</span>       <span class="c1"># Enable auto learning</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;qa&quot;</span><span class="p">:</span> <span class="p">{</span>                         <span class="c1"># QA agent override</span>
                        <span class="s2">&quot;auto_learning&quot;</span><span class="p">:</span> <span class="kc">True</span>       <span class="c1"># Enable auto learning</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="c1"># Socket.IO server health and recovery configuration</span>
            <span class="s2">&quot;socketio_server&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">8765</span><span class="p">,</span>
                <span class="s2">&quot;enable_health_monitoring&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;enable_recovery&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;health_monitoring&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;check_interval&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                    <span class="s2">&quot;history_size&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                    <span class="s2">&quot;aggregation_window&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
                    <span class="s2">&quot;thresholds&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;cpu_percent&quot;</span><span class="p">:</span> <span class="mf">80.0</span><span class="p">,</span>
                        <span class="s2">&quot;memory_mb&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                        <span class="s2">&quot;file_descriptors&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                        <span class="s2">&quot;max_clients&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                        <span class="s2">&quot;max_error_rate&quot;</span><span class="p">:</span> <span class="mf">0.1</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="s2">&quot;recovery&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s2">&quot;max_attempts&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                    <span class="s2">&quot;circuit_breaker&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;failure_threshold&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                        <span class="s2">&quot;timeout_seconds&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
                        <span class="s2">&quot;success_threshold&quot;</span><span class="p">:</span> <span class="mi">3</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;strategy&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;warning_threshold&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                        <span class="s2">&quot;critical_threshold&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;failure_window_seconds&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
                        <span class="s2">&quot;min_recovery_interval&quot;</span><span class="p">:</span> <span class="mi">60</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;log_warning&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;clear_connections&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;restart_service&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;emergency_stop&quot;</span><span class="p">:</span> <span class="kc">True</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="c1"># Agent deployment configuration</span>
            <span class="s2">&quot;agent_deployment&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;excluded_agents&quot;</span><span class="p">:</span> <span class="p">[],</span>              <span class="c1"># List of agent IDs to exclude from deployment</span>
                <span class="s2">&quot;exclude_dependencies&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>      <span class="c1"># Whether to exclude agent dependencies too</span>
                <span class="s2">&quot;case_sensitive&quot;</span><span class="p">:</span> <span class="kc">False</span>            <span class="c1"># Whether agent name matching is case-sensitive</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1"># Apply defaults for missing keys</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">default_value</span> <span class="ow">in</span> <span class="n">defaults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_value</span>
        
        <span class="c1"># Validate health and recovery configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_health_recovery_config</span><span class="p">()</span>

<div class="viewcode-block" id="Config.get">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.get">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get configuration value.&quot;&quot;&quot;</span>
        <span class="c1"># Support nested keys with dot notation</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">default</span></div>


<div class="viewcode-block" id="Config.set">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.set">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set configuration value.&quot;&quot;&quot;</span>
        <span class="c1"># Support nested keys with dot notation</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
                <span class="n">config</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

        <span class="n">config</span><span class="p">[</span><span class="n">keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="Config.update">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.update">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update configuration with new values.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_mgr</span><span class="o">.</span><span class="n">merge_configs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></div>


<div class="viewcode-block" id="Config.to_dict">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get configuration as dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>


<div class="viewcode-block" id="Config.save">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.save">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save configuration to file.&quot;&quot;&quot;</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config_mgr</span><span class="o">.</span><span class="n">save_json</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config_mgr</span><span class="o">.</span><span class="n">save_yaml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ConfigurationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unsupported configuration format: </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="nb">format</span><span class="p">,</span> <span class="s2">&quot;supported_formats&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]}</span>
                <span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration saved to </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to save configuration to </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span></div>


<div class="viewcode-block" id="Config.validate">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.validate">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate configuration against a schema.</span>

<span class="sd">        Args:</span>
<span class="sd">            schema: Dictionary defining required keys and types</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if valid, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">expected_type</span> <span class="ow">in</span> <span class="n">schema</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing required configuration key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>

                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">expected_type</span><span class="p">):</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Configuration key &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; has wrong type. &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;Expected </span><span class="si">{</span><span class="n">expected_type</span><span class="si">}</span><span class="s2">, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration validation error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Config.__getitem__">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.__getitem__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow dictionary-style access.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>


<div class="viewcode-block" id="Config.__setitem__">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.__setitem__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow dictionary-style assignment.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>


<div class="viewcode-block" id="Config.__contains__">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.__contains__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if configuration contains a key.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_health_recovery_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate health monitoring and recovery configuration.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Validate health thresholds</span>
            <span class="n">thresholds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;health_thresholds&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="k">if</span> <span class="n">thresholds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cpu_percent&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">thresholds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cpu_percent&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;CPU threshold should be between 0-100, using default 80&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;health_thresholds.cpu_percent&#39;</span><span class="p">,</span> <span class="mf">80.0</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">thresholds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;memory_mb&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Memory threshold should be positive, using default 500MB&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;health_thresholds.memory_mb&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">thresholds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_error_rate&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">thresholds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_error_rate&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Error rate threshold should be between 0-1, using default 0.1&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;health_thresholds.max_error_rate&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
            
            <span class="c1"># Validate recovery configuration</span>
            <span class="n">recovery_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;recovery&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="k">if</span> <span class="n">recovery_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_recovery_attempts&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Max recovery attempts should be positive, using default 5&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;recovery.max_recovery_attempts&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            
            <span class="c1"># Validate circuit breaker configuration</span>
            <span class="n">cb_config</span> <span class="o">=</span> <span class="n">recovery_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;circuit_breaker&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="k">if</span> <span class="n">cb_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;failure_threshold&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Circuit breaker failure threshold should be positive, using default 5&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;recovery.circuit_breaker.failure_threshold&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">cb_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timeout_seconds&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Circuit breaker timeout should be positive, using default 300&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;recovery.circuit_breaker.timeout_seconds&#39;</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
            
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error validating health/recovery configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
<div class="viewcode-block" id="Config.get_health_monitoring_config">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.get_health_monitoring_config">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_health_monitoring_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get health monitoring configuration with defaults.&quot;&quot;&quot;</span>
        <span class="n">base_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;enabled&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;enable_health_monitoring&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="s1">&#39;check_interval&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;health_check_interval&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
            <span class="s1">&#39;history_size&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;health_history_size&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
            <span class="s1">&#39;aggregation_window&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;health_aggregation_window&#39;</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span>
            <span class="s1">&#39;thresholds&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;health_thresholds&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="s1">&#39;cpu_percent&#39;</span><span class="p">:</span> <span class="mf">80.0</span><span class="p">,</span>
                <span class="s1">&#39;memory_mb&#39;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                <span class="s1">&#39;file_descriptors&#39;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s1">&#39;max_clients&#39;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s1">&#39;max_error_rate&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
                <span class="s1">&#39;network_timeout&#39;</span><span class="p">:</span> <span class="mf">2.0</span>
            <span class="p">})</span>
        <span class="p">}</span>
        
        <span class="c1"># Merge with socketio-specific config if available</span>
        <span class="n">socketio_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;socketio_server.health_monitoring&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">socketio_config</span><span class="p">:</span>
            <span class="n">base_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">socketio_config</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">base_config</span></div>

    
<div class="viewcode-block" id="Config.get_recovery_config">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.get_recovery_config">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_recovery_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get recovery configuration with defaults.&quot;&quot;&quot;</span>
        <span class="n">base_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;recovery&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;enabled&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;check_interval&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
            <span class="s1">&#39;max_recovery_attempts&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s1">&#39;recovery_timeout&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s1">&#39;circuit_breaker&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;failure_threshold&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s1">&#39;timeout_seconds&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
                <span class="s1">&#39;success_threshold&#39;</span><span class="p">:</span> <span class="mi">3</span>
            <span class="p">},</span>
            <span class="s1">&#39;strategy&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;warning_threshold&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="s1">&#39;critical_threshold&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;failure_window_seconds&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
                <span class="s1">&#39;min_recovery_interval&#39;</span><span class="p">:</span> <span class="mi">60</span>
            <span class="p">}</span>
        <span class="p">})</span>
        
        <span class="c1"># Merge with socketio-specific config if available</span>
        <span class="n">socketio_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;socketio_server.recovery&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">socketio_config</span><span class="p">:</span>
            <span class="n">base_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_mgr</span><span class="o">.</span><span class="n">merge_configs</span><span class="p">(</span><span class="n">base_config</span><span class="p">,</span> <span class="n">socketio_config</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">base_config</span></div>


<div class="viewcode-block" id="Config.validate_configuration">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.validate_configuration">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the loaded configuration programmatically.</span>
<span class="sd">        </span>
<span class="sd">        WHY: Provide a programmatic way to validate configuration that can be</span>
<span class="sd">        used by other components to check configuration health.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Tuple of (is_valid, errors, warnings)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="c1"># Check if there was a load error</span>
        <span class="k">if</span> <span class="s1">&#39;_load_error&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration load error: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s1">&#39;_load_error&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            
        <span class="c1"># Validate response_logging configuration</span>
        <span class="n">response_logging</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;response_logging&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">response_logging</span><span class="p">:</span>
            <span class="c1"># Check enabled field</span>
            <span class="k">if</span> <span class="s1">&#39;enabled&#39;</span> <span class="ow">in</span> <span class="n">response_logging</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response_logging</span><span class="p">[</span><span class="s1">&#39;enabled&#39;</span><span class="p">],</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;response_logging.enabled must be boolean, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">response_logging</span><span class="p">[</span><span class="s1">&#39;enabled&#39;</span><span class="p">])</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                
            <span class="c1"># Check format field</span>
            <span class="k">if</span> <span class="s1">&#39;format&#39;</span> <span class="ow">in</span> <span class="n">response_logging</span><span class="p">:</span>
                <span class="n">valid_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;syslog&#39;</span><span class="p">,</span> <span class="s1">&#39;journald&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">response_logging</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_formats</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;response_logging.format must be one of </span><span class="si">{</span><span class="n">valid_formats</span><span class="si">}</span><span class="s2">, &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;got &#39;</span><span class="si">{</span><span class="n">response_logging</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                    <span class="p">)</span>
                    
            <span class="c1"># Check session_directory</span>
            <span class="k">if</span> <span class="s1">&#39;session_directory&#39;</span> <span class="ow">in</span> <span class="n">response_logging</span><span class="p">:</span>
                <span class="n">session_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">response_logging</span><span class="p">[</span><span class="s1">&#39;session_directory&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">session_dir</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">session_dir</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Parent directory for session_directory does not exist: </span><span class="si">{</span><span class="n">session_dir</span><span class="o">.</span><span class="n">parent</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    
        <span class="c1"># Validate memory configuration</span>
        <span class="n">memory_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;memory&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">memory_config</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;enabled&#39;</span> <span class="ow">in</span> <span class="n">memory_config</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">memory_config</span><span class="p">[</span><span class="s1">&#39;enabled&#39;</span><span class="p">],</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;memory.enabled must be boolean&quot;</span><span class="p">)</span>
                
            <span class="c1"># Check limits</span>
            <span class="n">limits</span> <span class="o">=</span> <span class="n">memory_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;limits&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;default_size_kb&#39;</span><span class="p">,</span> <span class="s1">&#39;max_sections&#39;</span><span class="p">,</span> <span class="s1">&#39;max_items_per_section&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">limits</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">limits</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;memory.limits.</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2"> must be positive integer, got </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        
        <span class="c1"># Validate health thresholds</span>
        <span class="n">health_thresholds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;health_thresholds&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">health_thresholds</span><span class="p">:</span>
            <span class="n">cpu</span> <span class="o">=</span> <span class="n">health_thresholds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cpu_percent&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cpu</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cpu</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">or</span> <span class="n">cpu</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">cpu</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">):</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;health_thresholds.cpu_percent must be 0-100, got </span><span class="si">{</span><span class="n">cpu</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
            <span class="n">mem</span> <span class="o">=</span> <span class="n">health_thresholds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;memory_mb&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mem</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">or</span> <span class="n">mem</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;health_thresholds.memory_mb must be positive, got </span><span class="si">{</span><span class="n">mem</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
        <span class="n">is_valid</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">is_valid</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">warnings</span></div>

        
<div class="viewcode-block" id="Config.get_configuration_status">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.get_configuration_status">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_configuration_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get detailed configuration status for debugging.</span>
<span class="sd">        </span>
<span class="sd">        WHY: Provide a comprehensive view of configuration state for</span>
<span class="sd">        troubleshooting and health checks.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Dictionary with configuration status information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_valid</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">warnings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_configuration</span><span class="p">()</span>
        
        <span class="n">status</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;valid&#39;</span><span class="p">:</span> <span class="n">is_valid</span><span class="p">,</span>
            <span class="s1">&#39;errors&#39;</span><span class="p">:</span> <span class="n">errors</span><span class="p">,</span>
            <span class="s1">&#39;warnings&#39;</span><span class="p">:</span> <span class="n">warnings</span><span class="p">,</span>
            <span class="s1">&#39;loaded_from&#39;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_loaded_from&#39;</span><span class="p">,</span> <span class="s1">&#39;defaults&#39;</span><span class="p">),</span>
            <span class="s1">&#39;key_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">),</span>
            <span class="s1">&#39;has_response_logging&#39;</span><span class="p">:</span> <span class="s1">&#39;response_logging&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span>
            <span class="s1">&#39;has_memory_config&#39;</span><span class="p">:</span> <span class="s1">&#39;memory&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span>
            <span class="s1">&#39;response_logging_enabled&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;response_logging.enabled&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s1">&#39;memory_enabled&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;memory.enabled&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="k">return</span> <span class="n">status</span></div>


<div class="viewcode-block" id="Config.__repr__">
<a class="viewcode-back" href="../../../claude_mpm.core.config.html#claude_mpm.core.Config.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Config(</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span><span class="si">}</span><span class="s2"> keys)&gt;&quot;</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Claude MPM Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>