---
actual_hours: null
assignees: []
created_at: '2025-08-21T23:18:36.604250'
dependencies: []
description: "Test the recently implemented fixes for pipx deployment issues to ensure\
  \ they work correctly.\n\n### Test Requirements:\n\n#### 1. Agent Source Tracking\
  \ Tests\n- Verify that agents no longer show \"Source change: X from unknown to\
  \ system\" messages\n- Test that the source inference logic correctly identifies:\n\
  \  - System agents\n  - Project agents (if any)\n  - User agents (if any)\n- Ensure\
  \ deployed agents maintain proper source metadata\n- Check that the fix works in\
  \ both development and pipx contexts\n\n**Files to test**:\n- `/Users/masa/Projects/claude-mpm/src/claude_mpm/services/agents/deployment/multi_source_deployment_service.py`\n\
  \n#### 2. MCP Server Installation Tests\n- Test that `claude-mpm mcp install gateway`\
  \ command works in pipx\n- Verify executable path detection finds the correct pipx\
  \ installation\n- Check that the MCP server entry point is accessible\n- Ensure\
  \ ~/.claude.json is properly configured with correct paths\n\n**Files to test**:\n\
  - `/Users/masa/Projects/claude-mpm/src/claude_mpm/cli/commands/mcp_install_commands.py`\n\
  - `/Users/masa/Projects/claude-mpm/src/claude_mpm/core/unified_paths.py`\n\n####\
  \ 3. Socket.IO Event Handling Tests\n- Verify that Socket.IO server starts properly\n\
  - Check that event handlers are registered correctly\n- Test that static files are\
  \ served from the correct location\n- Ensure debug logging provides useful diagnostic\
  \ information\n- Verify events can be received by the server\n\n**Files to test**:\n\
  - `/Users/masa/Projects/claude-mpm/src/claude_mpm/services/socketio/handlers/registry.py`\n\
  - `/Users/masa/Projects/claude-mpm/src/claude_mpm/services/socketio/server/core.py`\n\
  \n### Test Execution:\n\n1. **Run existing tests** that cover these areas:\n   ```bash\n\
  \   pytest tests/services/agents/test_deployment.py -v\n   pytest tests/cli/test_mcp_commands.py\
  \ -v\n   pytest tests/services/socketio/ -v\n   ```\n\n2. **Verify in development\
  \ mode**:\n   - Run claude-mpm from the development directory\n   - Check startup\
  \ logs for any \"unknown to system\" messages\n   - Verify MCP and Socket.IO functionality\n\
  \n3. **Document test results** including:\n   - Tests passed/failed\n   - Any error\
  \ messages or warnings\n   - Performance observations\n   - Edge cases discovered\n\
  \n### Expected Outcomes:\n- No \"Source change: unknown to system\" messages during\
  \ startup\n- MCP server installs and configures correctly in pipx\n- Socket.IO server\
  \ receives events properly\n- All logging is informative and helpful for debugging"
due_date: null
estimated_hours: null
id: TSK-0161
labels: []
metadata: {}
parent: null
priority: high
status: open
tags:
- testing
- pipx
- deployment
- mcp
- socketio
- agents
title: 'QA: Test Claude MPM pipx deployment fixes'
updated_at: '2025-08-21T23:18:36.604250'
---

# QA: Test Claude MPM pipx deployment fixes

## Description
Test the recently implemented fixes for pipx deployment issues to ensure they work correctly.

### Test Requirements:

#### 1. Agent Source Tracking Tests
- Verify that agents no longer show "Source change: X from unknown to system" messages
- Test that the source inference logic correctly identifies:
  - System agents
  - Project agents (if any)
  - User agents (if any)
- Ensure deployed agents maintain proper source metadata
- Check that the fix works in both development and pipx contexts

**Files to test**:
- `/Users/masa/Projects/claude-mpm/src/claude_mpm/services/agents/deployment/multi_source_deployment_service.py`

#### 2. MCP Server Installation Tests
- Test that `claude-mpm mcp install gateway` command works in pipx
- Verify executable path detection finds the correct pipx installation
- Check that the MCP server entry point is accessible
- Ensure ~/.claude.json is properly configured with correct paths

**Files to test**:
- `/Users/masa/Projects/claude-mpm/src/claude_mpm/cli/commands/mcp_install_commands.py`
- `/Users/masa/Projects/claude-mpm/src/claude_mpm/core/unified_paths.py`

#### 3. Socket.IO Event Handling Tests
- Verify that Socket.IO server starts properly
- Check that event handlers are registered correctly
- Test that static files are served from the correct location
- Ensure debug logging provides useful diagnostic information
- Verify events can be received by the server

**Files to test**:
- `/Users/masa/Projects/claude-mpm/src/claude_mpm/services/socketio/handlers/registry.py`
- `/Users/masa/Projects/claude-mpm/src/claude_mpm/services/socketio/server/core.py`

### Test Execution:

1. **Run existing tests** that cover these areas:
   ```bash
   pytest tests/services/agents/test_deployment.py -v
   pytest tests/cli/test_mcp_commands.py -v
   pytest tests/services/socketio/ -v
   ```

2. **Verify in development mode**:
   - Run claude-mpm from the development directory
   - Check startup logs for any "unknown to system" messages
   - Verify MCP and Socket.IO functionality

3. **Document test results** including:
   - Tests passed/failed
   - Any error messages or warnings
   - Performance observations
   - Edge cases discovered

### Expected Outcomes:
- No "Source change: unknown to system" messages during startup
- MCP server installs and configures correctly in pipx
- Socket.IO server receives events properly
- All logging is informative and helpful for debugging

## Details
- **Status**: open
- **Priority**: high
- **Assignees**: None
- **Tags**: testing, pipx, deployment, mcp, socketio, agents
- **Created**: 2025-08-21 23:18:36
- **Updated**: 2025-08-21 23:18:36

## Tasks
- [ ] Add task items here

## Notes
_Add any additional notes or context here._
