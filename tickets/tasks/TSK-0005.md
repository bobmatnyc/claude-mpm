---
actual_hours: null
assignees: []
created_at: '2026-02-08T21:17:36.889881'
dependencies: []
description: 'Message export, channel archival, user management.


  Acceptance Criteria:

  - [x] claude-mpm tools slack messages-export works

  - [x] claude-mpm tools slack channels-list works

  - [x] Handles rate limits properly'
due_date: null
estimated_hours: null
id: TSK-0005
labels: []
metadata:
  epic: EP-0002
parent: null
priority: medium
status: completed
tags:
- ep-0002
- slack
- messaging
title: Implement Slack bulk operations tools
updated_at: '2026-02-08T04:57:41'
---

# Implement Slack bulk operations tools

## Description
Message export, channel archival, user management.

Acceptance Criteria:
- [x] claude-mpm tools slack messages-export works
- [x] claude-mpm tools slack channels-list works
- [x] Handles rate limits properly

## Details
- **Status**: completed
- **Priority**: medium
- **Assignees**: None
- **Tags**: ep-0002, slack, messaging
- **Created**: 2026-02-08 21:17:36
- **Updated**: 2026-02-08 04:57:41
- **Completed**: 2026-02-08 04:57:41

## Implementation

**Commit**: 94d8a8ae4

### Slack Channels List (channels-list)
- Lists all channels in workspace (public and private)
- Optional `--include-private` flag (default: True)
- Configurable `--limit` parameter for max channels
- Pagination support via Slack's cursor-based pagination
- Returns formatted channel data:
  - id, name, is_private, is_archived
  - num_members, topic, purpose
- Handles both public and private channel types

**Usage**:
```bash
# List all channels (public + private)
claude-mpm tools slack channels-list --limit 100

# List only public channels
claude-mpm tools slack channels-list --include-private false
```

### Slack Messages Export (messages-export)
- Export messages from any channel by ID
- Required `--channel` parameter (channel ID)
- Optional timestamp filtering:
  - `--oldest`: Start timestamp (UNIX format)
  - `--latest`: End timestamp (UNIX format)
- Configurable `--limit` (default: 1000)
- Pagination support for large message histories
- Returns formatted messages:
  - type, user, text, ts (timestamp)
  - thread_ts (for threaded messages)
  - reply_count, reactions
- Preserves message metadata and threading

**Usage**:
```bash
# Export recent messages from a channel
claude-mpm tools slack messages-export --channel C123456 --limit 500

# Export messages from specific time range
claude-mpm tools slack messages-export --channel C123456 --oldest 1609459200 --latest 1640995200
```

### Authentication
- Uses `slack-user-proxy` service name
- Integrates with TokenStorage for secure credentials
- Long-lived Slack user tokens (typically don't expire)
- Error handling directs users to: `claude-mpm setup oauth slack`

### API Integration
- **Slack Web API endpoints**:
  - `conversations.list`: Channel listing
  - `conversations.history`: Message retrieval
- **Response handling**: Checks `ok: true/false` pattern
- **Pagination**: Cursor-based with `next_cursor`
- **Rate limiting**: Slack handles server-side (no artificial delays needed)
- **Timeout**: 30 seconds per request

### Rate Limiting Strategy
- Uses Slack's built-in cursor pagination
- Respects API limits: 1000 items per request max
- No artificial delays required
- Graceful handling of rate limit errors from Slack API

## Notes
Implementation completed with full Slack channels and messages functionality. Cursor-based pagination handles large workspaces and message histories efficiently. Rate limiting handled by Slack's API design (no manual throttling needed).
