---
actual_hours: null
assignees: []
created_at: '2025-08-20T08:28:02.217298'
dependencies: []
description: "## Task: Update MCP installation command to use Claude Code configuration\n\
  \n### Problem\nThe MCP installation command is currently updating the wrong configuration\
  \ file. It's updating the Claude Desktop config file but should be updating Claude\
  \ Code's configuration file.\n\n### Required Changes\n\n1. **Update configuration\
  \ file path**\n   - Change from: `~/Library/Application Support/Claude/claude_desktop_config.json`\
  \ (macOS) and platform-specific paths\n   - Change to: `~/.claude/settings.local.json`\
  \ (all platforms)\n   - This path should be consistent across macOS, Windows, and\
  \ Linux\n\n2. **File to modify**: `src/claude_mpm/cli/commands/mcp_install_commands.py`\n\
  \n3. **Specific updates needed**:\n   - Update the `_get_claude_config_path()` method\
  \ to return `~/.claude/settings.local.json`\n   - Remove platform-specific logic\
  \ since Claude Code uses the same path on all platforms\n   - Ensure the path expands\
  \ correctly using `os.path.expanduser()`\n   - Update any comments or documentation\
  \ in the code to reflect this change\n   - Verify the JSON structure being written\
  \ is compatible with Claude Code's settings format\n\n4. **Testing considerations**:\n\
  \   - The settings.local.json file should be in the user's home directory under\
  \ the `.claude` folder\n   - Ensure the path works correctly on all platforms\n\
  \   - Test that the MCP configuration is properly written to the new location\n\n\
  ### Acceptance Criteria\n- MCP installation command writes to `~/.claude/settings.local.json`\n\
  - Path works consistently across all platforms (macOS, Windows, Linux)\n- JSON structure\
  \ is compatible with Claude Code's settings format\n- Code comments and documentation\
  \ are updated to reflect the change"
due_date: null
estimated_hours: null
id: TSK-0126
labels: []
metadata: {}
parent: null
priority: high
status: open
tags:
- bug-fix
- mcp
- configuration
- claude-code
title: '[Engineer] Fix MCP installation to use correct Claude Code config file'
updated_at: '2025-08-20T08:28:02.217298'
---

# [Engineer] Fix MCP installation to use correct Claude Code config file

## Description
## Task: Update MCP installation command to use Claude Code configuration

### Problem
The MCP installation command is currently updating the wrong configuration file. It's updating the Claude Desktop config file but should be updating Claude Code's configuration file.

### Required Changes

1. **Update configuration file path**
   - Change from: `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS) and platform-specific paths
   - Change to: `~/.claude/settings.local.json` (all platforms)
   - This path should be consistent across macOS, Windows, and Linux

2. **File to modify**: `src/claude_mpm/cli/commands/mcp_install_commands.py`

3. **Specific updates needed**:
   - Update the `_get_claude_config_path()` method to return `~/.claude/settings.local.json`
   - Remove platform-specific logic since Claude Code uses the same path on all platforms
   - Ensure the path expands correctly using `os.path.expanduser()`
   - Update any comments or documentation in the code to reflect this change
   - Verify the JSON structure being written is compatible with Claude Code's settings format

4. **Testing considerations**:
   - The settings.local.json file should be in the user's home directory under the `.claude` folder
   - Ensure the path works correctly on all platforms
   - Test that the MCP configuration is properly written to the new location

### Acceptance Criteria
- MCP installation command writes to `~/.claude/settings.local.json`
- Path works consistently across all platforms (macOS, Windows, Linux)
- JSON structure is compatible with Claude Code's settings format
- Code comments and documentation are updated to reflect the change

## Details
- **Status**: open
- **Priority**: high
- **Assignees**: None
- **Tags**: bug-fix, mcp, configuration, claude-code
- **Created**: 2025-08-20 08:28:02
- **Updated**: 2025-08-20 08:28:02

## Tasks
- [ ] Add task items here

## Notes
_Add any additional notes or context here._
