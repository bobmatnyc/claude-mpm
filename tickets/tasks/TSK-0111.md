---
actual_hours: null
assignees: []
created_at: '2025-08-18T01:30:33.208187'
dependencies: []
description: "Handle the build and deployment process for claude-mpm 4.0.4 release:\n\
  \n### Build Process:\n1. **Build Python packages**: `python -m build`\n2. **Build\
  \ npm package**: `npm pack`\n3. **Verify package contents**: Check dist/ directory\
  \ for proper files\n\n### Git Operations:\n1. **Create commit** with conventional\
  \ commit message:\n   ```\n   chore: bump version to 4.0.4\n   \n   - Fixed dashboard\
  \ event parsing issues\n   - Fixed JavaScript errors in dashboard\n   - Added hook\
  \ routing regression tests\n   - Improved port management with smart process detection\n\
  \   ```\n\n2. **Create and push tag**:\n   ```bash\n   git tag -a v4.0.4 -m \"Release\
  \ version 4.0.4 - Dashboard fixes and improvements\"\n   git push origin main\n\
  \   git push origin v4.0.4\n   ```\n\n### Registry Deployment:\n1. **PyPI deployment**:\
  \ `python -m twine upload dist/*`\n2. **npm deployment**: `npm publish`\n\n### Prerequisites:\n\
  - Version files must be updated (TSK-0109)\n- All tests must pass (TSK-0110)\n-\
  \ Working directory: /Users/masa/Projects/claude-mpm\n- Current branch: main\n\n\
  ### Deployment Verification:\n- Verify packages appear on PyPI\n- Verify npm package\
  \ is published\n- Confirm version 4.0.4 is available for installation\n\nPlease\
  \ coordinate with the version update and testing tasks before proceeding with the\
  \ build and deployment."
due_date: null
estimated_hours: null
id: TSK-0111
labels: []
metadata: {}
parent: null
priority: high
status: open
tags:
- release
- deployment
- build
- pypi
- npm
title: '[Ops] Build packages and deploy 4.0.4 release to registries'
updated_at: '2025-08-18T01:30:33.208187'
---

# [Ops] Build packages and deploy 4.0.4 release to registries

## Description
Handle the build and deployment process for claude-mpm 4.0.4 release:

### Build Process:
1. **Build Python packages**: `python -m build`
2. **Build npm package**: `npm pack`
3. **Verify package contents**: Check dist/ directory for proper files

### Git Operations:
1. **Create commit** with conventional commit message:
   ```
   chore: bump version to 4.0.4
   
   - Fixed dashboard event parsing issues
   - Fixed JavaScript errors in dashboard
   - Added hook routing regression tests
   - Improved port management with smart process detection
   ```

2. **Create and push tag**:
   ```bash
   git tag -a v4.0.4 -m "Release version 4.0.4 - Dashboard fixes and improvements"
   git push origin main
   git push origin v4.0.4
   ```

### Registry Deployment:
1. **PyPI deployment**: `python -m twine upload dist/*`
2. **npm deployment**: `npm publish`

### Prerequisites:
- Version files must be updated (TSK-0109)
- All tests must pass (TSK-0110)
- Working directory: /Users/masa/Projects/claude-mpm
- Current branch: main

### Deployment Verification:
- Verify packages appear on PyPI
- Verify npm package is published
- Confirm version 4.0.4 is available for installation

Please coordinate with the version update and testing tasks before proceeding with the build and deployment.

## Details
- **Status**: open
- **Priority**: high
- **Assignees**: None
- **Tags**: release, deployment, build, pypi, npm
- **Created**: 2025-08-18 01:30:33
- **Updated**: 2025-08-18 01:30:33

## Tasks
- [ ] Add task items here

## Notes
_Add any additional notes or context here._
