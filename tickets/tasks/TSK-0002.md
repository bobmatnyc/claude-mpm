---
actual_hours: null
assignees: []
created_at: '2026-02-08T21:17:29.749069'
dependencies: []
description: 'Gmail export, import, archive, bulk label operations.


  Acceptance Criteria:

  - [x] claude-mpm tools google gmail-export works

  - [x] claude-mpm tools google gmail-import works

  - [x] JSON input/output format

  - [x] Pagination for large exports (implemented)'
due_date: null
estimated_hours: null
id: TSK-0002
labels: []
metadata:
  epic: EP-0002
parent: null
priority: high
status: completed
tags:
- ep-0002
- google
- gmail
title: Implement Gmail bulk operations tools
updated_at: '2026-02-08T01:57:41'
---

# Implement Gmail bulk operations tools

## Description
Gmail export, import, archive, bulk label operations.

Acceptance Criteria:
- [x] claude-mpm tools google gmail-export works
- [x] claude-mpm tools google gmail-import works
- [x] JSON input/output format
- [x] Pagination for large exports (implemented)

## Details
- **Status**: completed
- **Priority**: high
- **Assignees**: None
- **Tags**: ep-0002, google, gmail
- **Created**: 2026-02-08 21:17:29
- **Updated**: 2026-02-08 01:57:41
- **Completed**: 2026-02-08 01:57:41

## Implementation

**Commit**: 1b9766327

### Gmail Export (gmail-export)
- Searches Gmail messages using Gmail API with query support
- Pagination support for large result sets
- Two export formats:
  - `metadata`: Basic message info (id, threadId)
  - `full`: Complete message content
- Configurable `--max-results` parameter
- Returns JSON with messages array and metadata

**Usage**:
```bash
claude-mpm tools google gmail-export --query "from:me" --max-results 100 --format metadata
```

### Gmail Import (gmail-import)
- Imports messages from JSON file
- Optional label assignment on import via `--label` parameter
- Batch processing with error tracking
- Returns success/failure counts

**Usage**:
```bash
claude-mpm tools google gmail-import --file messages.json --label "Imported"
```

### Token Management
- Integrated with TokenStorage for secure credential access
- Clear error messages when tokens missing/expired
- Directs users to `claude-mpm setup oauth google-workspace-mcp` for authentication

## Notes
Implementation completed with full Gmail export/import functionality. Pagination handles large message sets efficiently. Token validation ensures proper authentication before operations.
